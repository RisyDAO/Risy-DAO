window.mrDummy = function(...args){}
/*! For license information please see bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OkxSwapWidget=t():e.OkxSwapWidget=t()}(self,(()=>(()=>{var e={602:(e,t,r)=>{"use strict";r.d(t,{c:()=>Lh});var n={};r.r(n),r.d(n,{abiSchemaToJsonSchema:()=>zr,codePointToInt:()=>$r,ensureIfUint8Array:()=>Yr,ethAbiToJsonSchema:()=>jr,fetchArrayElement:()=>Wr,hexToNumber:()=>Zr,hexToUint8Array:()=>Gr,numberToHex:()=>Kr,padLeft:()=>Hr,parseBaseType:()=>Ur,transformJsonDataToAbiFormat:()=>Dr,uint8ArrayToHexString:()=>Vr});var i={};function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function o(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){o(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}r.r(i),r.d(i,{aK:()=>yi,e8:()=>ti,DO:()=>ei,dJ:()=>bi,OG:()=>wi,My:()=>ni,Ph:()=>ci,lX:()=>hi,Id:()=>pi,fg:()=>_i,qj:()=>fi,aT:()=>ui,r4:()=>gi,aY:()=>Qn,x:()=>Ai,lq:()=>li,z:()=>di,zW:()=>ii,Q5:()=>xi});const c={number:s,bool:function(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)},bytes:o,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");s(e.outputLen),s(e.blockLen)},exists:a,output:u},h=c,l=BigInt(2**32-1),d=BigInt(32);function f(e,t=!1){return t?{h:Number(e&l),l:Number(e>>d&l)}:{h:0|Number(e>>d&l),l:0|Number(e&l)}}function p(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=f(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}"object"==typeof globalThis&&"crypto"in globalThis&&globalThis.crypto;const m=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function g(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function y(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function b(e){return"string"==typeof e&&(e=y(e)),o(e),e}class w{clone(){return this._cloneInto()}}const v=[],k=[],_=[],E=BigInt(0),x=BigInt(1),A=BigInt(2),I=BigInt(7),S=BigInt(256),B=BigInt(113);for(let e=0,t=x,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],v.push(2*(5*n+r)),k.push((e+1)*(e+2)/2%64);let i=E;for(let e=0;e<7;e++)t=(t<<x^(t>>I)*B)%S,t&A&&(i^=x<<(x<<BigInt(e))-x);_.push(i)}const[T,M]=p(_,!0),O=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),P=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class N extends w{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,s(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var o;this.state=new Uint8Array(200),this.state32=(o=this.state,new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)))}keccak(){m||g(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=O(s,o,1)^r[n],u=P(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=k[r],s=O(t,i,n),o=P(t,i,n),a=v[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=T[n],e[1]^=M[n]}r.fill(0)}(this.state32,this.rounds),m||g(this.state32),this.posOut=0,this.pos=0}update(e){a(this);const{blockLen:t,state:r}=this,n=(e=b(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){a(this,!1),o(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return s(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(u(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new N(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const L=(e,t,r)=>function(e){const t=t=>e().update(b(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new N(t,e,r))),R=L(1,144,28),U=L(1,136,32),C=L(1,104,48),z=L(1,72,64);function j(e){return t=>(h.bytes(t),e(t))}h.bool,h.bytes,(()=>{const t="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r=void 0!==e&&"function"==typeof e.require&&e.require.bind(e);r&&!t&&r("crypto")})(),j(R);const W=(()=>{const e=j(U);return e.create=U.create,e})(),D=(j(C),j(z),4001),$=4100,Z=4200,K=4900,H=4901,V=-32700,F=-32600,q=-32601,G=-32602,Y=-32603,J=-32e3,X=-32001,Q=-32002,ee=-32003,te=-32004,re=-32005,ne=-32006;class ie extends Error{constructor(e,t){super(e),Array.isArray(t)?this.cause=new se(t):this.cause=t,this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(new.target.constructor):this.stack=(new Error).stack}get innerError(){return this.cause instanceof se?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new se(e):this.cause=e}static convertToString(e,t=!1){if(null==e)return"undefined";const r=JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t));return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class se extends ie{constructor(e){super(`Multiple errors occurred: [${e.map((e=>e.message)).join("], [")}]`),this.code=208,this.errors=e}}class oe extends ie{constructor(e,t){super(`Invalid value given "${ie.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class ae extends oe{constructor(e){super(e,"can not parse as byte data"),this.code=1002}}class ue extends oe{constructor(e){super(e,"can not parse as number data"),this.code=1003}}const ce={[V]:{message:"Parse error",description:"Invalid JSON"},[F]:{message:"Invalid request",description:"JSON is not a valid request object\t"},[q]:{message:"Method not found",description:"Method does not exist\t"},[G]:{message:"Invalid params",description:"Invalid method parameters"},[Y]:{message:"Internal error",description:"Internal JSON-RPC error"},[J]:{message:"Invalid input",description:"Missing or invalid parameters"},[X]:{message:"Resource not found",description:"Requested resource not found"},[Q]:{message:"Resource unavailable",description:"Requested resource not available"},[ee]:{message:"Transaction rejected",description:"Transaction creation failed"},[te]:{message:"Method not supported",description:"Method is not implemented"},[re]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[ne]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[D]:{name:"User Rejected Request",message:"The user rejected the request."},[$]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[Z]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[K]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[H]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class he extends ie{constructor(e,t){super(null!=t?t:"An Rpc error has occured with a code of *code*".replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}const le=new Map;le.set(V,{error:class extends he{constructor(e){super(e,ce[-32700].message),this.code=V}}}),le.set(F,{error:class extends he{constructor(e){super(e,ce[-32600].message),this.code=F}}}),le.set(q,{error:class extends he{constructor(e){super(e,ce[-32601].message),this.code=q}}}),le.set(G,{error:class extends he{constructor(e){super(e,ce[-32602].message),this.code=G}}}),le.set(Y,{error:class extends he{constructor(e){super(e,ce[-32603].message),this.code=Y}}}),le.set(J,{error:class extends he{constructor(e){super(e,ce[-32e3].message),this.code=J}}}),le.set(te,{error:class extends he{constructor(e){super(e,ce[-32004].message),this.code=te}}}),le.set(Q,{error:class extends he{constructor(e){super(e,ce[-32002].message),this.code=Q}}}),le.set(ee,{error:class extends he{constructor(e){super(e,ce[-32003].message),this.code=ee}}}),le.set(X,{error:class extends he{constructor(e){super(e,ce[-32001].message),this.code=X}}}),le.set(ne,{error:class extends he{constructor(e){super(e,ce[-32006].message),this.code=ne}}}),le.set(re,{error:class extends he{constructor(e){super(e,ce[-32005].message),this.code=re}}});class de extends ie{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=1200}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}var fe,pe;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(fe||(fe={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(pe||(pe={}));const me=fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ge=e=>{switch(typeof e){case"undefined":return me.undefined;case"string":return me.string;case"number":return isNaN(e)?me.nan:me.number;case"boolean":return me.boolean;case"function":return me.function;case"bigint":return me.bigint;case"symbol":return me.symbol;case"object":return Array.isArray(e)?me.array:null===e?me.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?me.promise:"undefined"!=typeof Map&&e instanceof Map?me.map:"undefined"!=typeof Set&&e instanceof Set?me.set:"undefined"!=typeof Date&&e instanceof Date?me.date:me.object;default:return me.unknown}},ye=fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class be extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof be))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,fe.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}be.create=e=>new be(e);const we=(e,t)=>{let r;switch(e.code){case ye.invalid_type:r=e.received===me.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ye.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,fe.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:r=`Unrecognized key(s) in object: ${fe.joinValues(e.keys,", ")}`;break;case ye.invalid_union:r="Invalid input";break;case ye.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${fe.joinValues(e.options)}`;break;case ye.invalid_enum_value:r=`Invalid enum value. Expected ${fe.joinValues(e.options)}, received '${e.received}'`;break;case ye.invalid_arguments:r="Invalid function arguments";break;case ye.invalid_return_type:r="Invalid function return type";break;case ye.invalid_date:r="Invalid date";break;case ye.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:fe.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ye.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ye.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ye.custom:r="Invalid input";break;case ye.invalid_intersection_types:r="Intersection results could not be merged";break;case ye.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ye.not_finite:r="Number must be finite";break;default:r=t.defaultError,fe.assertNever(e)}return{message:r}};let ve=we;function ke(){return ve}const _e=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}};function Ee(e,t){const r=ke(),n=_e({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===we?void 0:we].filter((e=>!!e))});e.common.issues.push(n)}class xe{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return Ae;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,n=await e.value;r.push({key:t,value:n})}return xe.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return Ae;if("aborted"===i.status)return Ae;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const Ae=Object.freeze({status:"aborted"}),Ie=e=>({status:"dirty",value:e}),Se=e=>({status:"valid",value:e}),Be=e=>"aborted"===e.status,Te=e=>"dirty"===e.status,Me=e=>"valid"===e.status,Oe=e=>"undefined"!=typeof Promise&&e instanceof Promise;function Pe(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function Ne(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}var Le,Re,Ue;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Le||(Le={}));class Ce{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ze=(e,t)=>{if(Me(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new be(e.common.issues);return this._error=t,this._error}}};function je(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(s=null!=a?a:n)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!=a?a:r)&&void 0!==o?o:i.defaultError}},description:i}}class We{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ge(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ge(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xe,ctx:{common:e.parent.common,data:e.data,parsedType:ge(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Oe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ge(e)},i=this._parseSync({data:e,path:n.path,parent:n});return ze(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ge(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(Oe(n)?n:Promise.resolve(n));return ze(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:ye.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new Lt({schema:this,typeName:Vt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Rt.create(this,this._def)}nullable(){return Ut.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mt.create(this,this._def)}promise(){return Nt.create(this,this._def)}or(e){return bt.create([this,e],this._def)}and(e){return _t.create(this,e,this._def)}transform(e){return new Lt({...je(this._def),schema:this,typeName:Vt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ct({...je(this._def),innerType:this,defaultValue:t,typeName:Vt.ZodDefault})}brand(){return new Dt({typeName:Vt.ZodBranded,type:this,...je(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new zt({...je(this._def),innerType:this,catchValue:t,typeName:Vt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return $t.create(this,e)}readonly(){return Zt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const De=/^c[^\s-]{8,}$/i,$e=/^[0-9a-z]+$/,Ze=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ke=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,He=/^[a-z0-9_-]{21}$/i,Ve=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let qe;const Ge=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ye=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Je=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xe="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qe=new RegExp(`^${Xe}$`);function et(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function tt(e){let t=`${Xe}T${et(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}class rt extends We{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==me.string){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.string,received:t.parsedType}),Ae}const t=new xe;let r;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const n=e.data.length>s.value,i=e.data.length<s.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?Ee(r,{code:ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&Ee(r,{code:ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)Fe.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"email",code:ye.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)qe||(qe=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),qe.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"emoji",code:ye.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)Ke.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"uuid",code:ye.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)He.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"nanoid",code:ye.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)De.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cuid",code:ye.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)$e.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cuid2",code:ye.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)Ze.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"ulid",code:ye.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),Ee(r,{validation:"url",code:ye.invalid_string,message:s.message}),t.dirty()}else"regex"===s.kind?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"regex",code:ye.invalid_string,message:s.message}),t.dirty())):"trim"===s.kind?e.data=e.data.trim():"includes"===s.kind?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty()):"toLowerCase"===s.kind?e.data=e.data.toLowerCase():"toUpperCase"===s.kind?e.data=e.data.toUpperCase():"startsWith"===s.kind?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty()):"endsWith"===s.kind?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty()):"datetime"===s.kind?tt(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.invalid_string,validation:"datetime",message:s.message}),t.dirty()):"date"===s.kind?Qe.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.invalid_string,validation:"date",message:s.message}),t.dirty()):"time"===s.kind?new RegExp(`^${et(s)}$`).test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.invalid_string,validation:"time",message:s.message}),t.dirty()):"duration"===s.kind?Ve.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"duration",code:ye.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?(n=e.data,("v4"!==(i=s.version)&&i||!Ge.test(n))&&("v6"!==i&&i||!Ye.test(n))&&(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"ip",code:ye.invalid_string,message:s.message}),t.dirty())):"base64"===s.kind?Je.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"base64",code:ye.invalid_string,message:s.message}),t.dirty()):fe.assertNever(s);var n,i;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:ye.invalid_string,...Le.errToObj(r)})}_addCheck(e){return new rt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...Le.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Le.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Le.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Le.errToObj(t)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new rt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new rt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new rt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function nt(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}rt.create=e=>{var t;return new rt({checks:[],typeName:Vt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...je(e)})};class it extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==me.number){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.number,received:t.parsedType}),Ae}let t;const r=new xe;for(const n of this._def.checks)"int"===n.kind?fe.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==nt(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.not_finite,message:n.message}),r.dirty()):fe.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Le.toString(t))}setLimit(e,t,r,n){return new it({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Le.toString(n)}]})}_addCheck(e){return new it({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&fe.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}it.create=e=>new it({checks:[],typeName:Vt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...je(e)});class st extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==me.bigint){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.bigint,received:t.parsedType}),Ae}let t;const r=new xe;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Ee(t,{code:ye.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):fe.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Le.toString(t))}setLimit(e,t,r,n){return new st({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Le.toString(n)}]})}_addCheck(e){return new st({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}st.create=e=>{var t;return new st({checks:[],typeName:Vt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...je(e)})};class ot extends We{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==me.boolean){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.boolean,received:t.parsedType}),Ae}return Se(e.data)}}ot.create=e=>new ot({typeName:Vt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...je(e)});class at extends We{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==me.date){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.date,received:t.parsedType}),Ae}if(isNaN(e.data.getTime()))return Ee(this._getOrReturnCtx(e),{code:ye.invalid_date}),Ae;const t=new xe;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ye.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):fe.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new at({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}at.create=e=>new at({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Vt.ZodDate,...je(e)});class ut extends We{_parse(e){if(this._getType(e)!==me.symbol){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.symbol,received:t.parsedType}),Ae}return Se(e.data)}}ut.create=e=>new ut({typeName:Vt.ZodSymbol,...je(e)});class ct extends We{_parse(e){if(this._getType(e)!==me.undefined){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.undefined,received:t.parsedType}),Ae}return Se(e.data)}}ct.create=e=>new ct({typeName:Vt.ZodUndefined,...je(e)});class ht extends We{_parse(e){if(this._getType(e)!==me.null){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.null,received:t.parsedType}),Ae}return Se(e.data)}}ht.create=e=>new ht({typeName:Vt.ZodNull,...je(e)});class lt extends We{constructor(){super(...arguments),this._any=!0}_parse(e){return Se(e.data)}}lt.create=e=>new lt({typeName:Vt.ZodAny,...je(e)});class dt extends We{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Se(e.data)}}dt.create=e=>new dt({typeName:Vt.ZodUnknown,...je(e)});class ft extends We{_parse(e){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.never,received:t.parsedType}),Ae}}ft.create=e=>new ft({typeName:Vt.ZodNever,...je(e)});class pt extends We{_parse(e){if(this._getType(e)!==me.undefined){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.void,received:t.parsedType}),Ae}return Se(e.data)}}pt.create=e=>new pt({typeName:Vt.ZodVoid,...je(e)});class mt extends We{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==me.array)return Ee(t,{code:ye.invalid_type,expected:me.array,received:t.parsedType}),Ae;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(Ee(t,{code:e?ye.too_big:ye.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(Ee(t,{code:ye.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(Ee(t,{code:ye.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new Ce(t,e,t.path,r))))).then((e=>xe.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new Ce(t,e,t.path,r))));return xe.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new mt({...this._def,minLength:{value:e,message:Le.toString(t)}})}max(e,t){return new mt({...this._def,maxLength:{value:e,message:Le.toString(t)}})}length(e,t){return new mt({...this._def,exactLength:{value:e,message:Le.toString(t)}})}nonempty(e){return this.min(1,e)}}function gt(e){if(e instanceof yt){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Rt.create(gt(n))}return new yt({...e._def,shape:()=>t})}return e instanceof mt?new mt({...e._def,type:gt(e.element)}):e instanceof Rt?Rt.create(gt(e.unwrap())):e instanceof Ut?Ut.create(gt(e.unwrap())):e instanceof Et?Et.create(e.items.map((e=>gt(e)))):e}mt.create=(e,t)=>new mt({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Vt.ZodArray,...je(t)});class yt extends We{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=fe.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==me.object){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.object,received:t.parsedType}),Ae}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof ft&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new Ce(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ft){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(Ee(r,{code:ye.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new Ce(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e})).then((e=>xe.mergeObjectSync(t,e))):xe.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new yt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=Le.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new yt({...this._def,unknownKeys:"strip"})}passthrough(){return new yt({...this._def,unknownKeys:"passthrough"})}extend(e){return new yt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Vt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new yt({...this._def,catchall:e})}pick(e){const t={};return fe.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new yt({...this._def,shape:()=>t})}omit(e){const t={};return fe.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new yt({...this._def,shape:()=>t})}deepPartial(){return gt(this)}partial(e){const t={};return fe.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new yt({...this._def,shape:()=>t})}required(e){const t={};return fe.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Rt;)e=e._def.innerType;t[r]=e}})),new yt({...this._def,shape:()=>t})}keyof(){return Mt(fe.objectKeys(this.shape))}}yt.create=(e,t)=>new yt({shape:()=>e,unknownKeys:"strip",catchall:ft.create(),typeName:Vt.ZodObject,...je(t)}),yt.strictCreate=(e,t)=>new yt({shape:()=>e,unknownKeys:"strict",catchall:ft.create(),typeName:Vt.ZodObject,...je(t)}),yt.lazycreate=(e,t)=>new yt({shape:e,unknownKeys:"strip",catchall:ft.create(),typeName:Vt.ZodObject,...je(t)});class bt extends We{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new be(e.ctx.common.issues)));return Ee(t,{code:ye.invalid_union,unionErrors:r}),Ae}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new be(e)));return Ee(t,{code:ye.invalid_union,unionErrors:i}),Ae}}get options(){return this._def.options}}bt.create=(e,t)=>new bt({options:e,typeName:Vt.ZodUnion,...je(t)});const wt=e=>e instanceof Bt?wt(e.schema):e instanceof Lt?wt(e.innerType()):e instanceof Tt?[e.value]:e instanceof Ot?e.options:e instanceof Pt?fe.objectValues(e.enum):e instanceof Ct?wt(e._def.innerType):e instanceof ct?[void 0]:e instanceof ht?[null]:e instanceof Rt?[void 0,...wt(e.unwrap())]:e instanceof Ut?[null,...wt(e.unwrap())]:e instanceof Dt||e instanceof Zt?wt(e.unwrap()):e instanceof zt?wt(e._def.innerType):[];class vt extends We{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==me.object)return Ee(t,{code:ye.invalid_type,expected:me.object,received:t.parsedType}),Ae;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Ee(t,{code:ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ae)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=wt(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new vt({typeName:Vt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...je(r)})}}function kt(e,t){const r=ge(e),n=ge(t);if(e===t)return{valid:!0,data:e};if(r===me.object&&n===me.object){const r=fe.objectKeys(t),n=fe.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=kt(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===me.array&&n===me.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=kt(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===me.date&&n===me.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class _t extends We{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(Be(e)||Be(n))return Ae;const i=kt(e.value,n.value);return i.valid?((Te(e)||Te(n))&&t.dirty(),{status:t.value,value:i.data}):(Ee(r,{code:ye.invalid_intersection_types}),Ae)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}_t.create=(e,t,r)=>new _t({left:e,right:t,typeName:Vt.ZodIntersection,...je(r)});class Et extends We{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.array)return Ee(r,{code:ye.invalid_type,expected:me.array,received:r.parsedType}),Ae;if(r.data.length<this._def.items.length)return Ee(r,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ae;!this._def.rest&&r.data.length>this._def.items.length&&(Ee(r,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new Ce(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>xe.mergeArray(t,e))):xe.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Et({...this._def,rest:e})}}Et.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Et({items:e,typeName:Vt.ZodTuple,rest:null,...je(t)})};class xt extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.object)return Ee(r,{code:ye.invalid_type,expected:me.object,received:r.parsedType}),Ae;const n=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new Ce(r,e,r.path,e)),value:s._parse(new Ce(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?xe.mergeObjectAsync(t,n):xe.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new xt(t instanceof We?{keyType:e,valueType:t,typeName:Vt.ZodRecord,...je(r)}:{keyType:rt.create(),valueType:e,typeName:Vt.ZodRecord,...je(t)})}}class At extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.map)return Ee(r,{code:ye.invalid_type,expected:me.map,received:r.parsedType}),Ae;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new Ce(r,e,r.path,[s,"key"])),value:i._parse(new Ce(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return Ae;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return Ae;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}At.create=(e,t,r)=>new At({valueType:t,keyType:e,typeName:Vt.ZodMap,...je(r)});class It extends We{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.set)return Ee(r,{code:ye.invalid_type,expected:me.set,received:r.parsedType}),Ae;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(Ee(r,{code:ye.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(Ee(r,{code:ye.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return Ae;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new Ce(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new It({...this._def,minSize:{value:e,message:Le.toString(t)}})}max(e,t){return new It({...this._def,maxSize:{value:e,message:Le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}It.create=(e,t)=>new It({valueType:e,minSize:null,maxSize:null,typeName:Vt.ZodSet,...je(t)});class St extends We{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==me.function)return Ee(t,{code:ye.invalid_type,expected:me.function,received:t.parsedType}),Ae;function r(e,r){return _e({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ke(),we].filter((e=>!!e)),issueData:{code:ye.invalid_arguments,argumentsError:r}})}function n(e,r){return _e({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ke(),we].filter((e=>!!e)),issueData:{code:ye.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof Nt){const e=this;return Se((async function(...t){const o=new be([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),u=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(u,i).catch((e=>{throw o.addIssue(n(u,e)),o}))}))}{const e=this;return Se((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new be([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),u=e._def.returns.safeParse(a,i);if(!u.success)throw new be([n(a,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new St({...this._def,args:Et.create(e).rest(dt.create())})}returns(e){return new St({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new St({args:e||Et.create([]).rest(dt.create()),returns:t||dt.create(),typeName:Vt.ZodFunction,...je(r)})}}class Bt extends We{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Bt.create=(e,t)=>new Bt({getter:e,typeName:Vt.ZodLazy,...je(t)});class Tt extends We{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ee(t,{received:t.data,code:ye.invalid_literal,expected:this._def.value}),Ae}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Mt(e,t){return new Ot({values:e,typeName:Vt.ZodEnum,...je(t)})}Tt.create=(e,t)=>new Tt({value:e,typeName:Vt.ZodLiteral,...je(t)});class Ot extends We{constructor(){super(...arguments),Re.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return Ee(t,{expected:fe.joinValues(r),received:t.parsedType,code:ye.invalid_type}),Ae}if(Pe(this,Re,"f")||Ne(this,Re,new Set(this._def.values),"f"),!Pe(this,Re,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Ee(t,{received:t.data,code:ye.invalid_enum_value,options:r}),Ae}return Se(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ot.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ot.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Re=new WeakMap,Ot.create=Mt;class Pt extends We{constructor(){super(...arguments),Ue.set(this,void 0)}_parse(e){const t=fe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==me.string&&r.parsedType!==me.number){const e=fe.objectValues(t);return Ee(r,{expected:fe.joinValues(e),received:r.parsedType,code:ye.invalid_type}),Ae}if(Pe(this,Ue,"f")||Ne(this,Ue,new Set(fe.getValidEnumValues(this._def.values)),"f"),!Pe(this,Ue,"f").has(e.data)){const e=fe.objectValues(t);return Ee(r,{received:r.data,code:ye.invalid_enum_value,options:e}),Ae}return Se(e.data)}get enum(){return this._def.values}}Ue=new WeakMap,Pt.create=(e,t)=>new Pt({values:e,typeName:Vt.ZodNativeEnum,...je(t)});class Nt extends We{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==me.promise&&!1===t.common.async)return Ee(t,{code:ye.invalid_type,expected:me.promise,received:t.parsedType}),Ae;const r=t.parsedType===me.promise?t.data:Promise.resolve(t.data);return Se(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Nt.create=(e,t)=>new Nt({type:e,typeName:Vt.ZodPromise,...je(t)});class Lt extends We{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{Ee(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return Ae;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?Ae:"dirty"===n.status||"dirty"===t.value?Ie(n.value):n}));{if("aborted"===t.value)return Ae;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?Ae:"dirty"===n.status||"dirty"===t.value?Ie(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?Ae:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?Ae:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Me(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>Me(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}fe.assertNever(n)}}Lt.create=(e,t,r)=>new Lt({schema:e,typeName:Vt.ZodEffects,effect:t,...je(r)}),Lt.createWithPreprocess=(e,t,r)=>new Lt({schema:t,effect:{type:"preprocess",transform:e},typeName:Vt.ZodEffects,...je(r)});class Rt extends We{_parse(e){return this._getType(e)===me.undefined?Se(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rt.create=(e,t)=>new Rt({innerType:e,typeName:Vt.ZodOptional,...je(t)});class Ut extends We{_parse(e){return this._getType(e)===me.null?Se(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ut.create=(e,t)=>new Ut({innerType:e,typeName:Vt.ZodNullable,...je(t)});class Ct extends We{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ct.create=(e,t)=>new Ct({innerType:e,typeName:Vt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...je(t)});class zt extends We{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Oe(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new be(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new be(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}zt.create=(e,t)=>new zt({innerType:e,typeName:Vt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...je(t)});class jt extends We{_parse(e){if(this._getType(e)!==me.nan){const t=this._getOrReturnCtx(e);return Ee(t,{code:ye.invalid_type,expected:me.nan,received:t.parsedType}),Ae}return{status:"valid",value:e.data}}}jt.create=e=>new jt({typeName:Vt.ZodNaN,...je(e)});const Wt=Symbol("zod_brand");class Dt extends We{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class $t extends We{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Ae:"dirty"===e.status?(t.dirty(),Ie(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Ae:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new $t({in:e,out:t,typeName:Vt.ZodPipeline})}}class Zt extends We{_parse(e){const t=this._def.innerType._parse(e),r=e=>(Me(e)&&(e.value=Object.freeze(e.value)),e);return Oe(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}function Kt(e,t={},r){return e?lt.create().superRefine(((n,i)=>{var s,o;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o,u="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...u,fatal:a})}})):lt.create()}Zt.create=(e,t)=>new Zt({innerType:e,typeName:Vt.ZodReadonly,...je(t)});const Ht={object:yt.lazycreate};var Vt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Vt||(Vt={}));const Ft=rt.create,qt=it.create,Gt=jt.create,Yt=st.create,Jt=ot.create,Xt=at.create,Qt=ut.create,er=ct.create,tr=ht.create,rr=lt.create,nr=dt.create,ir=ft.create,sr=pt.create,or=mt.create,ar=yt.create,ur=yt.strictCreate,cr=bt.create,hr=vt.create,lr=_t.create,dr=Et.create,fr=xt.create,pr=At.create,mr=It.create,gr=St.create,yr=Bt.create,br=Tt.create,wr=Ot.create,vr=Pt.create,kr=Nt.create,_r=Lt.create,Er=Rt.create,xr=Ut.create,Ar=Lt.createWithPreprocess,Ir=$t.create,Sr={string:e=>rt.create({...e,coerce:!0}),number:e=>it.create({...e,coerce:!0}),boolean:e=>ot.create({...e,coerce:!0}),bigint:e=>st.create({...e,coerce:!0}),date:e=>at.create({...e,coerce:!0})},Br=Ae;var Tr=Object.freeze({__proto__:null,defaultErrorMap:we,setErrorMap:function(e){ve=e},getErrorMap:ke,makeIssue:_e,EMPTY_PATH:[],addIssueToContext:Ee,ParseStatus:xe,INVALID:Ae,DIRTY:Ie,OK:Se,isAborted:Be,isDirty:Te,isValid:Me,isAsync:Oe,get util(){return fe},get objectUtil(){return pe},ZodParsedType:me,getParsedType:ge,ZodType:We,datetimeRegex:tt,ZodString:rt,ZodNumber:it,ZodBigInt:st,ZodBoolean:ot,ZodDate:at,ZodSymbol:ut,ZodUndefined:ct,ZodNull:ht,ZodAny:lt,ZodUnknown:dt,ZodNever:ft,ZodVoid:pt,ZodArray:mt,ZodObject:yt,ZodUnion:bt,ZodDiscriminatedUnion:vt,ZodIntersection:_t,ZodTuple:Et,ZodRecord:xt,ZodMap:At,ZodSet:It,ZodFunction:St,ZodLazy:Bt,ZodLiteral:Tt,ZodEnum:Ot,ZodNativeEnum:Pt,ZodPromise:Nt,ZodEffects:Lt,ZodTransformer:Lt,ZodOptional:Rt,ZodNullable:Ut,ZodDefault:Ct,ZodCatch:zt,ZodNaN:jt,BRAND:Wt,ZodBranded:Dt,ZodPipeline:$t,ZodReadonly:Zt,custom:Kt,Schema:We,ZodSchema:We,late:Ht,get ZodFirstPartyTypeKind(){return Vt},coerce:Sr,any:rr,array:or,bigint:Yt,boolean:Jt,date:Xt,discriminatedUnion:hr,effect:_r,enum:wr,function:gr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Kt((t=>t instanceof e),t),intersection:lr,lazy:yr,literal:br,map:pr,nan:Gt,nativeEnum:vr,never:ir,null:tr,nullable:xr,number:qt,object:ar,oboolean:()=>Jt().optional(),onumber:()=>qt().optional(),optional:Er,ostring:()=>Ft().optional(),pipeline:Ir,preprocess:Ar,promise:kr,record:fr,set:mr,strictObject:ur,string:Ft,symbol:Qt,transformer:_r,tuple:dr,undefined:er,union:cr,unknown:nr,void:sr,NEVER:Br,ZodIssueCode:ye,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:be});const Mr=e=>e.message?e.message:"unspecified error";class Or extends ie{constructor(e){super(),this.code=1100,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:\n${this._compileErrors().join("\n")}`}_compileErrors(){return this.errors.map(Mr)}}const Pr=["bool","int","uint","bytes","string","address","tuple"],Nr=e=>"object"==typeof e&&"type"in e&&"name"in e,Lr=e=>"string"==typeof e&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(e),Rr=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],Ur=e=>{let t,r=e.replace(/ /,""),n=!1,i=[];if(e.includes("[")&&(r=r.slice(0,r.indexOf("[")),i=[...e.matchAll(/(?:\[(\d*)\])/g)].map((e=>parseInt(e[1],10))).map((e=>Number.isNaN(e)?-1:e)),n=i.length>0),Pr.includes(r))return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i};if(r.startsWith("int"))t=parseInt(r.substring(3),10),r="int";else if(r.startsWith("uint"))t=parseInt(e.substring(4),10),r="uint";else{if(!r.startsWith("bytes"))return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};t=parseInt(r.substring(5),10),r="bytes"}return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i}},Cr=(e,t={})=>{if(Object.keys(t).includes("type"))throw new Or([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:e},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:n}=Ur(e);if(!r&&!Rr.includes(e))throw new Or([{keyword:"eth",message:`Eth data type "${e}" is not valid`,params:{eth:e},instancePath:"",schemaPath:""}]);if(r){if("tuple"===r)throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${null!=n?n:""}`,required:!0}}return e?{format:e,required:!0}:{}},zr=(e,t="/0")=>{const r={type:"array",items:[],maxItems:e.length,minItems:e.length};for(const[n,i]of e.entries()){let e,s,o=[];Nr(i)?(e=i.type,s=i.name||`${t}/${n}`,o=i.components):"string"==typeof i?(e=i,s=`${t}/${n}`):Array.isArray(i)&&(i[0]&&"string"==typeof i[0]&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(e=i[0],s=`${t}/${n}`,o=i[1]):(e="tuple",s=`${t}/${n}`,o=i));const{baseType:a,isArray:u,arraySizes:c}=Ur(e);let h,l=r;for(let e=c.length-1;e>0;e-=1)h={type:"array",$id:s,items:[],maxItems:c[e],minItems:c[e]},c[e]<0&&(delete h.maxItems,delete h.minItems),Array.isArray(l.items)?0===l.items.length?l.items=[h]:l.items.push(h):l.items=[l.items,h],l=h;if("tuple"!==a||u)if("tuple"===a&&u){const e=c[0],t=Object.assign({type:"array",$id:s,items:zr(o,s)},e>=0&&{minItems:e,maxItems:e});l.items.push(t)}else if(u){const t=c[0],r=Object.assign({type:"array",$id:s,items:Cr(e)},t>=0&&{minItems:t,maxItems:t});l.items.push(r)}else Array.isArray(l.items),l.items.push(Object.assign({$id:s},Cr(e)));else{const e=zr(o,s);e.$id=s,l.items.push(e)}l=r}return r},jr=e=>zr(e),Wr=(e,t)=>1===t?e:Wr(e[0],t-1),Dr=(e,t,r)=>{const n=[];for(const[i,s]of e.entries()){let e,o,a=[];Nr(s)?(e=s.type,o=s.name,a=s.components):"string"==typeof s?e=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(e=s[0],a=s[1]):(e="tuple",a=s));const{baseType:u,isArray:c,arraySizes:h}=Ur(e),l=Array.isArray(t)?t[i]:t[o];if("tuple"!==u||c)if("tuple"===u&&c){const e=[];for(const t of l)if(h.length>1){const n=Wr(t,h.length-1),i=[];for(const e of n)i.push(Dr(a,e,r));e.push(i)}else e.push(Dr(a,t,r));n.push(e)}else n.push(l);else n.push(Dr(a,l,r))}return(r=null!=r?r:[]).push(...n),r},$r=e=>{if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-55;if(e>=97&&e<=102)return e-87;throw new Error(`Invalid code point: ${e}`)},Zr=e=>{if(!Lr(e))throw new Error("Invalid hex string");const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],n=BigInt(r);return n>Number.MAX_SAFE_INTEGER?t?-n:n:n<Number.MIN_SAFE_INTEGER?n:t?-1*Number(n):Number(n)},Kr=e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<0)return`-0x${e.toString(16).slice(1)}`;if(("number"==typeof e||"bigint"==typeof e)&&e>=0)return`0x${e.toString(16)}`;if("string"==typeof e&&Lr(e)){const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e];return`${t?"-":""}0x${r.split(/^(-)?0(x|X)/).slice(-1)[0].replace(/^0+/,"").toLowerCase()}`}if("string"==typeof e&&!Lr(e))return Kr(BigInt(e));throw new ue(e)},Hr=(e,t,r="0")=>{if("string"==typeof e&&!Lr(e))return e.padStart(t,r);const n="string"==typeof e&&Lr(e)?e:Kr(e),[i,s]=n.startsWith("-")?["-0x",n.slice(3)]:["0x",n.slice(2)];return`${i}${s.padStart(t,r)}`};function Vr(e){let t="0x";for(const r of e){const e=r.toString(16);t+=1===e.length?`0${e}`:e}return t}const Fr={zero:48,nine:57,A:65,F:70,a:97,f:102};function qr(e){return e>=Fr.zero&&e<=Fr.nine?e-Fr.zero:e>=Fr.A&&e<=Fr.F?e-(Fr.A-10):e>=Fr.a&&e<=Fr.f?e-(Fr.a-10):void 0}function Gr(e){let t=0;if(!e.startsWith("0")||"x"!==e[1]&&"X"!==e[1]||(t=2),e.length%2!=0)throw new ae(`hex string has odd length: ${e}`);const r=(e.length-t)/2,n=new Uint8Array(r);for(let i=0,s=t;i<r;i+=1){const t=qr(e.charCodeAt(s++)),r=qr(e.charCodeAt(s++));if(void 0===t||void 0===r)throw new ae(`Invalid byte sequence ("${e[s-2]}${e[s-1]}" in "${e}").`);n[i]=16*t+r}return n}function Yr(e){var t;return e instanceof Uint8Array||"Uint8Array"!==(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)?e:Uint8Array.from(e)}const Jr=e=>{var t,r;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"Buffer"===(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)},Xr=(e,t={abiType:"bytes"})=>{if("string"!=typeof e&&!Array.isArray(e)&&!Jr(e))return!1;if("string"==typeof e&&Lr(e)&&e.startsWith("-"))return!1;if("string"==typeof e&&!Lr(e))return!1;let r;if("string"==typeof e){if(e.length%2!=0)return!1;r=Gr(e)}else if(Array.isArray(e)){if(e.some((e=>e<0||e>255||!Number.isInteger(e))))return!1;r=new Uint8Array(e)}else r=e;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=Ur(t.abiType);return!e||r.length===e}return!(null==t?void 0:t.size)||r.length===(null==t?void 0:t.size)},Qr=(e,t=!0)=>{if("string"!=typeof e&&!Jr(e))return!1;let r;return r=Jr(e)?Vr(e):"string"!=typeof e||Lr(e)||e.toLowerCase().startsWith("0x")?e:`0x${e}`,!!/^(0x)?[0-9a-f]{40}$/i.test(r)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(r)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(r))||!t||(e=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(e))return!1;const t=e.slice(2),r=y(t.toLowerCase()),n=Vr(W(Yr(r))).slice(2);for(let e=0;e<40;e+=1)if(parseInt(n[e],16)>7&&t[e].toUpperCase()!==t[e]||parseInt(n[e],16)<=7&&t[e].toLowerCase()!==t[e])return!1;return!0})(r))};var en,tn,rn,nn,sn,on,an;(nn=en||(en={})).NUMBER="NUMBER_NUMBER",nn.HEX="NUMBER_HEX",nn.STR="NUMBER_STR",nn.BIGINT="NUMBER_BIGINT",(rn=tn||(tn={})).HEX="BYTES_HEX",rn.UINT8ARRAY="BYTES_UINT8ARRAY",en.BIGINT,tn.HEX,en.HEX,tn.HEX,(an=sn||(sn={})).EARLIEST="earliest",an.LATEST="latest",an.PENDING="pending",an.SAFE="safe",an.FINALIZED="finalized",an.COMMITTED="committed",function(e){e.chainstart="chainstart",e.frontier="frontier",e.homestead="homestead",e.dao="dao",e.tangerineWhistle="tangerineWhistle",e.spuriousDragon="spuriousDragon",e.byzantium="byzantium",e.constantinople="constantinople",e.petersburg="petersburg",e.istanbul="istanbul",e.muirGlacier="muirGlacier",e.berlin="berlin",e.london="london",e.altair="altair",e.arrowGlacier="arrowGlacier",e.grayGlacier="grayGlacier",e.bellatrix="bellatrix",e.merge="merge",e.capella="capella",e.shanghai="shanghai"}(on||(on={})),Object.getPrototypeOf(Uint8Array),Symbol.for("web3/base-provider");const un=(e,t)=>{if(t===BigInt(0))return BigInt(1);let r=e;for(let n=1;n<t;n+=1)r*=e;return r},cn=(e,t={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof e)||"string"==typeof e&&0===e.length)return!1;let r;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=Ur(t.abiType);e&&(r=e)}else t.bitSize&&(r=t.bitSize);const n=un(BigInt(2),BigInt(null!=r?r:256))-BigInt(1);try{const t="string"==typeof e&&Lr(e)?BigInt(Zr(e)):BigInt(e);return t>=0&&t<=n}catch(e){return!1}},hn=(e,t={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof e))return!1;if("number"==typeof e&&e>Number.MAX_SAFE_INTEGER)return!1;let r;if(null==t?void 0:t.abiType){const{baseTypeSize:e,baseType:n}=Ur(t.abiType);if("int"!==n)return!1;e&&(r=e)}else t.bitSize&&(r=t.bitSize);const n=un(BigInt(2),BigInt((null!=r?r:256)-1)),i=BigInt(-1)*un(BigInt(2),BigInt((null!=r?r:256)-1));try{const t="string"==typeof e&&Lr(e)?BigInt(Zr(e)):BigInt(e);return t>=i&&t<=n}catch(e){return!1}},ln=e=>cn(e),dn=e=>Object.values(sn).includes(e),fn=e=>dn(e)||ln(e),pn=e=>null==e,mn=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{64}$/i.test(e)||!/^(0x)?[0-9a-f]{64}$/.test(e)&&!/^(0x)?[0-9A-F]{64}$/.test(e)),gn={address:e=>Qr(e),bloom:e=>{return!("string"!=typeof(t=e)||!/^(0x)?[0-9a-f]{512}$/i.test(t)||!/^(0x)?[0-9a-f]{512}$/.test(t)&&!/^(0x)?[0-9A-F]{512}$/.test(t));var t},blockNumber:e=>ln(e),blockTag:e=>dn(e),blockNumberOrTag:e=>fn(e),bool:e=>{return!!["number","string","boolean"].includes(typeof(t=e))&&("boolean"==typeof t||("string"!=typeof t||Lr(t)?"string"==typeof t&&Lr(t)?"0x1"===t||"0x0"===t:1===t||0===t:"1"===t||"0"===t));var t},bytes:e=>Xr(e),filter:e=>(e=>{const t=["fromBlock","toBlock","address","topics","blockHash"];if(pn(e)||"object"!=typeof e)return!1;if(!Object.keys(e).every((e=>t.includes(e))))return!1;if(!pn(e.fromBlock)&&!fn(e.fromBlock)||!pn(e.toBlock)&&!fn(e.toBlock))return!1;if(!pn(e.address))if(Array.isArray(e.address)){if(!e.address.every((e=>Qr(e))))return!1}else if(!Qr(e.address))return!1;return!(!pn(e.topics)&&!e.topics.every((e=>!!pn(e)||(Array.isArray(e)?e.every((e=>mn(e))):!!mn(e)))))})(e),hex:e=>Lr(e),uint:e=>cn(e),int:e=>hn(e),number:e=>{return!!hn(t=e)||!("string"!=typeof t||!/[0-9.]/.test(t)||t.indexOf(".")!==t.lastIndexOf("."))||"number"==typeof t;var t},string:e=>"string"==typeof e};for(let e=8;e<=256;e+=8)gn[`int${e}`]=t=>hn(t,{bitSize:e}),gn[`uint${e}`]=t=>cn(t,{bitSize:e});for(let e=1;e<=32;e+=1)gn[`bytes${e}`]=t=>Xr(t,{size:e});gn.bytes256=gn.bytes;const yn=gn,bn=e=>{if((!(null==e?void 0:e.type)||"object"===(null==e?void 0:e.type))&&(null==e?void 0:e.properties)){const t={};for(const r of Object.keys(e.properties)){const n=bn(e.properties[r]);n&&(t[r]=n)}return Array.isArray(e.required)?Tr.object(t).partial().required(e.required.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{})):Tr.object(t).partial()}if("array"===(null==e?void 0:e.type)&&(null==e?void 0:e.items)){if(Array.isArray(e.items)&&e.items.length>1&&void 0!==e.maxItems&&new Set(e.items.map((e=>e.$id))).size===e.items.length){const t=[];for(const r of e.items){const e=bn(r);e&&t.push(e)}return Tr.tuple(t)}const t=Array.isArray(e.items)?e.items[0]:e.items;let r=Tr.array(bn(t));return r=void 0!==e.minItems?r.min(e.minItems):r,r=void 0!==e.maxItems?r.max(e.maxItems):r,r}if(e.oneOf&&Array.isArray(e.oneOf))return Tr.union(e.oneOf.map((e=>bn(e))));if(null==e?void 0:e.format){if(!yn[e.format])throw new de(e.format);return Tr.any().refine(yn[e.format],(t=>({params:{value:t,format:e.format}})))}return(null==e?void 0:e.type)&&"object"!==(null==e?void 0:e.type)&&"function"==typeof Tr[String(e.type)]?Tr[String(e.type)]():Tr.object({data:Tr.any()}).partial()};class wn{static factory(){return wn.validatorInstance||(wn.validatorInstance=new wn),wn.validatorInstance}validate(e,t,r){var n,i;const s=bn(e).safeParse(t);if(!s.success){const e=this.convertErrors(null!==(i=null===(n=s.error)||void 0===n?void 0:n.issues)&&void 0!==i?i:[]);if(e){if(null==r?void 0:r.silent)return e;throw new Or(e)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map((e=>{var t;let r,n,i,s;s=e.path.join("/");const o=String(e.path[e.path.length-1]),a=e.path.join("/");if(e.code===ye.too_big)n="maxItems",s=`${a}/maxItems`,i={limit:e.maximum},r=`must NOT have more than ${e.maximum} items`;else if(e.code===ye.too_small)n="minItems",s=`${a}/minItems`,i={limit:e.minimum},r=`must NOT have fewer than ${e.minimum} items`;else if(e.code===ye.custom){const{value:n,format:o}=null!==(t=e.params)&&void 0!==t?t:{};r=void 0===n?`value at "/${s}" is required`:`value "${"object"==typeof n?JSON.stringify(n):n}" at "/${s}" must pass "${o}" validation`,i={value:n}}return{keyword:null!=n?n:o,instancePath:a?`/${a}`:"",schemaPath:s?`#${s}`:"#",params:null!=i?i:{value:e.message},message:null!=r?r:e.message}}))}}const vn=new class{constructor(){this._validator=wn.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t,r={silent:!1}){var n,i;const s=jr(e);if(!Array.isArray(s.items)||0!==(null===(n=s.items)||void 0===n?void 0:n.length)||0!==t.length){if(Array.isArray(s.items)&&0===(null===(i=s.items)||void 0===i?void 0:i.length)&&0!==t.length)throw new Or([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(s,t,r)}}};BigInt(0),BigInt(1),BigInt(1e3),BigInt(1e3),BigInt(1e3),BigInt(1e3),BigInt(1e6),BigInt(1e6),BigInt(1e6),BigInt(1e6),BigInt(1e9),BigInt(1e9),BigInt(1e9),BigInt(1e9),BigInt(1e9),BigInt(1e12),BigInt(1e12),BigInt(1e12),BigInt(1e15),BigInt(1e15),BigInt(1e15),BigInt("1000000000000000000"),BigInt("1000000000000000000000"),BigInt("1000000000000000000000"),BigInt("1000000000000000000000000"),BigInt("1000000000000000000000000000"),BigInt("1000000000000000000000000000000");const{uint8ArrayToHexString:kn}=n,_n=e=>{if("number"==typeof e)return e>1e20?(mrDummy("Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods"),BigInt(e)):e;if("bigint"==typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e;if("string"==typeof e&&Lr(e))return(e=>(vn.validate(["hex"],[e]),Zr(e)))(e);try{return _n(BigInt(e))}catch(t){throw new ue(e)}};r(228);const En=pn,{parseBaseType:xn}=n;Symbol.toStringTag;var An=r(287);function In(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Sn(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Bn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const Tn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Mn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),On=(e,t)=>e<<32-t|e>>>t;function Pn(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Sn(e),e}class Nn{clone(){return this._cloneInto()}}function Ln(e){const t=t=>e().update(Pn(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Rn(e=32){if(Tn&&"function"==typeof Tn.getRandomValues)return Tn.getRandomValues(new Uint8Array(e));if(Tn&&"function"==typeof Tn.randomBytes)return Tn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Un=(e,t,r)=>e&t^~e&r,Cn=(e,t,r)=>e&t^e&r^t&r;class zn extends Nn{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Mn(this.buffer)}update(e){Bn(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=Pn(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Mn(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bn(this),function(e,t){Sn(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Mn(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const jn=BigInt(2**32-1),Wn=BigInt(32);function Dn(e,t=!1){return t?{h:Number(e&jn),l:Number(e>>Wn&jn)}:{h:0|Number(e>>Wn&jn),l:0|Number(e&jn)}}const $n={fromBig:Dn,split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Dn(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]},toBig:(e,t)=>BigInt(e>>>0)<<Wn|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},Zn=$n,[Kn,Hn]=(()=>Zn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Vn=new Uint32Array(80),Fn=new Uint32Array(80);class qn extends zn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:u,El:c,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,u,c,h,l,d,f,p,m]}set(e,t,r,n,i,s,o,a,u,c,h,l,d,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)Vn[r]=e.getUint32(t),Fn[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Vn[e-15],r=0|Fn[e-15],n=Zn.rotrSH(t,r,1)^Zn.rotrSH(t,r,8)^Zn.shrSH(t,r,7),i=Zn.rotrSL(t,r,1)^Zn.rotrSL(t,r,8)^Zn.shrSL(t,r,7),s=0|Vn[e-2],o=0|Fn[e-2],a=Zn.rotrSH(s,o,19)^Zn.rotrBH(s,o,61)^Zn.shrSH(s,o,6),u=Zn.rotrSL(s,o,19)^Zn.rotrBL(s,o,61)^Zn.shrSL(s,o,6),c=Zn.add4L(i,u,Fn[e-7],Fn[e-16]),h=Zn.add4H(c,n,a,Vn[e-7],Vn[e-16]);Vn[e]=0|h,Fn[e]=0|c}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:u,Dl:c,Eh:h,El:l,Fh:d,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let e=0;e<80;e++){const t=Zn.rotrSH(h,l,14)^Zn.rotrSH(h,l,18)^Zn.rotrBH(h,l,41),b=Zn.rotrSL(h,l,14)^Zn.rotrSL(h,l,18)^Zn.rotrBL(h,l,41),w=h&d^~h&p,v=l&f^~l&m,k=Zn.add5L(y,b,v,Hn[e],Fn[e]),_=Zn.add5H(k,g,t,w,Kn[e],Vn[e]),E=0|k,x=Zn.rotrSH(r,n,28)^Zn.rotrBH(r,n,34)^Zn.rotrBH(r,n,39),A=Zn.rotrSL(r,n,28)^Zn.rotrBL(r,n,34)^Zn.rotrBL(r,n,39),I=r&i^r&o^i&o,S=n&s^n&a^s&a;g=0|p,y=0|m,p=0|d,m=0|f,d=0|h,f=0|l,({h,l}=Zn.add(0|u,0|c,0|_,0|E)),u=0|o,c=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const B=Zn.add3L(E,A,S);r=Zn.add3H(B,_,x,I),n=0|B}({h:r,l:n}=Zn.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=Zn.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Zn.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:u,l:c}=Zn.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h,l}=Zn.add(0|this.Eh,0|this.El,0|h,0|l)),({h:d,l:f}=Zn.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:m}=Zn.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=Zn.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(r,n,i,s,o,a,u,c,h,l,d,f,p,m,g,y)}roundClean(){Vn.fill(0),Fn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Gn=Ln((()=>new qn)),Yn=BigInt(0),Jn=BigInt(1),Xn=BigInt(2);function Qn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function ei(e){if(!Qn(e))throw new Error("Uint8Array expected")}function ti(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const ri=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ni(e){ei(e);let t="";for(let r=0;r<e.length;r++)t+=ri[e[r]];return t}function ii(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function si(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Yn:BigInt("0x"+e)}const oi={_0:48,_9:57,A:65,F:70,a:97,f:102};function ai(e){return e>=oi._0&&e<=oi._9?e-oi._0:e>=oi.A&&e<=oi.F?e-(oi.A-10):e>=oi.a&&e<=oi.f?e-(oi.a-10):void 0}function ui(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=ai(e.charCodeAt(i)),s=ai(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function ci(e){return si(ni(e))}function hi(e){return ei(e),si(ni(Uint8Array.from(e).reverse()))}function li(e,t){return ui(e.toString(16).padStart(2*t,"0"))}function di(e,t){return li(e,t).reverse()}function fi(e,t,r){let n;if("string"==typeof t)try{n=ui(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Qn(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function pi(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];ei(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const mi=e=>"bigint"==typeof e&&Yn<=e;function gi(e,t,r){return mi(e)&&mi(t)&&mi(r)&&t<=e&&e<r}function yi(e,t,r,n){if(!gi(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function bi(e){let t;for(t=0;e>Yn;e>>=Jn,t+=1);return t}const wi=e=>(Xn<<BigInt(e-1))-Jn,vi=e=>new Uint8Array(e),ki=e=>Uint8Array.from(e);function _i(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=vi(e),i=vi(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),u=(e=vi())=>{i=a(ki([0]),e),n=a(),0!==e.length&&(i=a(ki([1]),e),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return pi(...r)};return(e,t)=>{let r;for(o(),u(e);!(r=t(c()));)u();return o(),r}}const Ei={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Qn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function xi(e,t,r={}){const n=(t,r,n)=>{const i=Ei[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function Ai(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}const Ii=BigInt(0),Si=BigInt(1),Bi=BigInt(2),Ti=BigInt(3),Mi=BigInt(4),Oi=BigInt(5),Pi=BigInt(8);function Ni(e,t){const r=e%t;return r>=Ii?r:t+r}function Li(e,t,r){if(t<Ii)throw new Error("invalid exponent, negatives unsupported");if(r<=Ii)throw new Error("invalid modulus");if(r===Si)return Ii;let n=Si;for(;t>Ii;)t&Si&&(n=n*e%r),e=e*e%r,t>>=Si;return n}function Ri(e,t,r){let n=e;for(;t-- >Ii;)n*=n,n%=r;return n}function Ui(e,t){if(e===Ii)throw new Error("invert: expected non-zero number");if(t<=Ii)throw new Error("invert: expected positive modulus, got "+t);let r=Ni(e,t),n=t,i=Ii,s=Si,o=Si,a=Ii;for(;r!==Ii;){const e=n/r,t=n%r,u=i-o*e,c=s-a*e;n=r,r=t,i=o,s=a,o=u,a=c}if(n!==Si)throw new Error("invert: does not exist");return Ni(i,t)}const Ci=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zi(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ji(e,t,r=!1,n={}){if(e<=Ii)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=zi(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:wi(i),ZERO:Ii,ONE:Si,create:t=>Ni(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return Ii<=t&&t<e},is0:e=>e===Ii,isOdd:e=>(e&Si)===Si,neg:t=>Ni(-t,e),eql:(e,t)=>e===t,sqr:t=>Ni(t*t,e),add:(t,r)=>Ni(t+r,e),sub:(t,r)=>Ni(t-r,e),mul:(t,r)=>Ni(t*r,e),pow:(e,t)=>function(e,t,r){if(r<Ii)throw new Error("invalid exponent, negatives unsupported");if(r===Ii)return e.ONE;if(r===Si)return t;let n=e.ONE,i=t;for(;r>Ii;)r&Si&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Si;return n}(a,e,t),div:(t,r)=>Ni(t*Ui(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ui(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%Mi===Ti){const t=(e+Si)/Mi;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Pi===Oi){const t=(e-Oi)/Pi;return function(e,r){const n=e.mul(r,Bi),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,Bi),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Si)/Bi;let r,n,i;for(r=e-Si,n=0;r%Bi===Ii;r/=Bi,n++);for(i=Bi;i<e&&Li(i,t,e)!==e-Si;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+Si)/Mi;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+Si)/Bi;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,u=e.pow(e.mul(e.ONE,i),r),c=e.pow(o,s),h=e.pow(o,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(u,Si<<BigInt(a-t-1));u=e.sqr(r),c=e.mul(c,r),h=e.mul(h,u),a=t}return c}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?di(e,s):li(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?hi(e):ci(e)}});return Object.freeze(a)}function Wi(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Di(e){const t=Wi(e);return t+Math.ceil(t/2)}const $i=BigInt(0),Zi=BigInt(1);function Ki(e,t){const r=t.negate();return e?r:t}function Hi(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Vi(e,t){return Hi(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Fi=new WeakMap,qi=new WeakMap;function Gi(e){return qi.get(e)||1}function Yi(e,t){return{constTimeNegate:Ki,hasPrecomputes:e=>1!==Gi(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>$i;)r&Zi&&(n=n.add(i)),i=i.double(),r>>=Zi;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Vi(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=Vi(r,t);let a=e.ZERO,u=e.BASE;const c=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&c);i>>=l,r>o&&(r-=h,i+=Zi);const s=t,d=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?u=u.add(Ki(f,n[s])):a=a.add(Ki(p,n[d]))}return{p:a,f:u}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=Vi(r,t),u=BigInt(2**r-1),c=2**r,h=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===$i)break;let r=Number(i&u);if(i>>=h,r>a&&(r-=c,i+=Zi),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=Fi.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Fi.set(t,r(n))),n},wNAFCached(e,t,r){const n=Gi(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Gi(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Hi(r,t),qi.set(e,r),Fi.delete(e)}}}function Ji(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=bi(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,u=new Array(a+1).fill(i);let c=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){u.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));u[s]=u[s].add(r[t])}let t=i;for(let e=u.length-1,r=i;e>0;e--)r=r.add(u[e]),t=t.add(r);if(c=c.add(t),0!==e)for(let e=0;e<o;e++)c=c.double()}return c}function Xi(e){return xi(e.Fp,Ci.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),xi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zi(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Qi=BigInt(0),es=BigInt(1),ts=BigInt(2),rs=BigInt(8),ns={zip215:!0};const is=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ss=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),os=(BigInt(0),BigInt(1)),as=BigInt(2),us=(BigInt(3),BigInt(5)),cs=BigInt(8);function hs(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function ls(e,t){const r=is,n=Ni(t*t*t,r),i=Ni(n*n*t,r);let s=Ni(e*n*function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=is,o=e*e%s*e%s,a=Ri(o,as,s)*o%s,u=Ri(a,os,s)*e%s,c=Ri(u,us,s)*u%s,h=Ri(c,t,s)*c%s,l=Ri(h,r,s)*h%s,d=Ri(l,n,s)*l%s,f=Ri(d,i,s)*d%s,p=Ri(f,i,s)*d%s,m=Ri(p,t,s)*c%s;return{pow_p_5_8:Ri(m,as,s)*e%s,b2:o}}(e*i).pow_p_5_8,r);const o=Ni(t*s*s,r),a=s,u=Ni(s*ss,r),c=o===e,h=o===Ni(-e,r),l=o===Ni(-e*ss,r);return c&&(s=a),(h||l)&&(s=u),(Ni(s,r)&Si)===Si&&(s=Ni(-s,r)),{isValid:c||h,value:s}}const ds=(()=>ji(is,void 0,!0))(),fs=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ds,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:cs,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Gn,randomBytes:Rn,adjustScalarBytes:hs,uvRatio:ls}))(),ps=(()=>function(e){const t=function(e){const t=Xi(e);return xi(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=t,c=ts<<BigInt(8*a)-es,h=r.create,l=ji(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:Qi}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(ti("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function m(e,t){yi("coordinate "+e,t,Qi,c)}function g(e){if(!(e instanceof w))throw new Error("ExtendedPoint expected")}const y=Ai(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?rs:r.inv(s));const a=h(n*t),u=h(i*t),c=h(s*t);if(o)return{x:Qi,y:es};if(c!==es)throw new Error("invZ was invalid");return{x:a,y:u}})),b=Ai((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,u=h(i*i),c=h(s*s),l=h(o*o),d=h(l*l),f=h(u*r);if(h(l*h(f+c))!==h(d+h(n*h(u*c))))throw new Error("bad point: equation left != right (1)");if(h(i*s)!==h(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,m("x",e),m("y",t),m("z",r),m("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return m("x",t),m("y",r),new w(t,r,es,h(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(w.fromAffine)}static msm(e,t){return Ji(w,l,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){g(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=h(t*o),u=h(i*n),c=h(r*o),l=h(s*n);return a===u&&c===l}is0(){return this.equals(w.ZERO)}negate(){return new w(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=h(r*r),o=h(n*n),a=h(ts*h(i*i)),u=h(e*s),c=r+n,l=h(h(c*c)-s-o),d=u+o,f=d-a,p=u-o,m=h(l*f),g=h(d*p),y=h(l*p),b=h(f*d);return new w(m,g,b,y)}add(e){g(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:u,ey:c,ez:l,et:d}=e;if(r===BigInt(-1)){const e=h((s-i)*(c+u)),t=h((s+i)*(c-u)),r=h(t-e);if(r===Qi)return this.double();const n=h(o*ts*d),f=h(a*ts*l),p=f+n,m=t+e,g=f-n,y=h(p*r),b=h(m*g),v=h(p*g),k=h(r*m);return new w(y,b,k,v)}const f=h(i*u),p=h(s*c),m=h(a*n*d),y=h(o*l),b=h((i+s)*(u+c)-f-p),v=y-m,k=y+m,_=h(p-r*f),E=h(b*v),x=h(k*_),A=h(b*_),I=h(v*k);return new w(E,x,I,A)}subtract(e){return this.add(e.negate())}wNAF(e){return _.wNAFCached(this,e,w.normalizeZ)}multiply(e){const t=e;yi("scalar",t,es,n);const{p:r,f:i}=this.wNAF(t);return w.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=w.ZERO){const r=e;return yi("scalar",r,Qi,n),r===Qi?k:this.is0()||r===es?this:_.wNAFCachedUnsafe(this,r,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===es?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=fi("pointHex",e,o),ti("zip215",n);const a=e.slice(),u=e[o-1];a[o-1]=-129&u;const l=hi(a),f=n?c:r.ORDER;yi("pointHex.y",l,Qi,f);const p=h(l*l),m=h(p-es),g=h(i*p-s);let{isValid:y,value:b}=d(m,g);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const v=(b&es)===es,k=!!(128&u);if(!n&&b===Qi&&k)throw new Error("Point.fromHex: x=0 and x_0=1");return k!==v&&(b=h(-b)),w.fromAffine({x:b,y:l})}static fromPrivateKey(e){return A(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=di(t,r.BYTES);return n[n.length-1]|=e&es?128:0,n}toHex(){return ni(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,es,h(t.Gx*t.Gy)),w.ZERO=new w(Qi,es,es,Qi);const{BASE:v,ZERO:k}=w,_=Yi(w,8*a);function E(e){return Ni(e,n)}function x(e){return E(hi(e))}function A(e){const t=r.BYTES;e=fi("private key",e,t);const n=fi("hashed private key",s(e),2*t),i=f(n.slice(0,t)),o=n.slice(t,2*t),a=x(i),u=v.multiply(a),c=u.toRawBytes();return{head:i,prefix:o,scalar:a,point:u,pointBytes:c}}function I(e=new Uint8Array,...t){const r=pi(...t);return x(s(p(r,fi("context",e),!!i)))}const S=ns;return v._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return A(e).pointBytes},sign:function(e,t,s={}){e=fi("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:u}=A(t),c=I(s.context,o,e),h=v.multiply(c).toRawBytes(),l=E(c+I(s.context,h,u,e)*a);return yi("signature.s",l,Qi,n),fi("result",pi(h,di(l,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,s=S){const{context:o,zip215:a}=s,u=r.BYTES;e=fi("signature",e,2*u),t=fi("message",t),n=fi("publicKey",n,u),void 0!==a&&ti("zip215",a),i&&(t=i(t));const c=hi(e.slice(u,2*u));let h,l,d;try{h=w.fromHex(n,a),l=w.fromHex(e.slice(0,u),a),d=v.multiplyUnsafe(c)}catch(e){return!1}if(!a&&h.isSmallOrder())return!1;const f=I(o,l.toRawBytes(),h.toRawBytes(),t);return l.add(h.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}(fs))();var ms=r(404),gs=r.n(ms),ys=r(466),bs=r.n(ys);function ws(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function vs(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ks(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _s(e,t){vs(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Es=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),xs=(e,t)=>e<<32-t|e>>>t,As=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function Is(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function Ss(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),vs(e),e}class Bs{clone(){return this._cloneInto()}}function Ts(e){const t=t=>e().update(Ss(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}const Ms=(e,t,r)=>e&t^~e&r,Os=(e,t,r)=>e&t^e&r^t&r;class Ps extends Bs{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Es(this.buffer)}update(e){ks(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=Ss(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Es(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){ks(this),_s(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Es(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Ns=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ls=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rs=new Uint32Array(64);class Us extends Ps{constructor(){super(64,32,8,!1),this.A=0|Ls[0],this.B=0|Ls[1],this.C=0|Ls[2],this.D=0|Ls[3],this.E=0|Ls[4],this.F=0|Ls[5],this.G=0|Ls[6],this.H=0|Ls[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Rs[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Rs[e-15],r=Rs[e-2],n=xs(t,7)^xs(t,18)^t>>>3,i=xs(r,17)^xs(r,19)^r>>>10;Rs[e]=i+Rs[e-7]+n+Rs[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(xs(o,6)^xs(o,11)^xs(o,25))+Ms(o,a,u)+Ns[e]+Rs[e]|0,h=(xs(r,2)^xs(r,13)^xs(r,22))+Os(r,n,i)|0;c=u,u=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,s,o,a,u,c)}roundClean(){Rs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Cs=Ts((()=>new Us));var zs=r(755),js=r(601),Ws=r(184);class Ds extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function $s(e){return"object"==typeof e&&null!=e}function Zs(e){return $s(e)&&!Array.isArray(e)}function Ks(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function Hs(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ks(n)}\``}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:u}}function*Vs(e,t,r,n){(function(e){return $s(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=Hs(i,t,r,n);e&&(yield e)}}function*Fs(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(e=t.coercer(e,a));let u="valid";for(const n of t.validator(e,a))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,h,l]of t.entries(e,a)){const t=Fs(h,l,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,h],coerce:s,mask:o,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(h=r[1],void 0===c?e=h:e instanceof Map?e.set(c,h):e instanceof Set?e.add(h):$s(e)&&(void 0!==h||c in e)&&(e[c]=h))}if("not_valid"!==u)for(const n of t.refiner(e,a))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class qs{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>Vs(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>Vs(i(e,t),t,this,e):()=>[]}assert(e,t){return function(e,t,r){const n=Js(e,t,{message:r});if(n[0])throw n[0]}(e,this,t)}create(e,t){return Gs(e,this,t)}is(e){return Ys(e,this)}mask(e,t){return function(e,t,r){const n=Js(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return Js(e,this,t)}}function Gs(e,t,r){const n=Js(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Ys(e,t){return!Js(e,t)[0]}function Js(e,t,r={}){const n=Fs(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new Ds(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]:[void 0,i[1]]}function Xs(e,t){return new qs({type:e,schema:null,validator:t})}function Qs(e){return new qs({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Ks(e)}`})}function eo(){return Xs("boolean",(e=>"boolean"==typeof e))}function to(e){return Xs("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${Ks(t)}`))}function ro(e){const t=Ks(e),r=typeof e;return new qs({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${Ks(r)}`})}function no(e){return new qs({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function io(){return Xs("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Ks(e)}`))}function so(e){return new qs({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function oo(e,t){return new qs({type:"record",schema:null,*entries(r){if($s(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>Zs(e)||`Expected an object, but received: ${Ks(e)}`,coercer:e=>Zs(e)?{...e}:e})}function ao(){return Xs("string",(e=>"string"==typeof e||`Expected a string, but received: ${Ks(e)}`))}function uo(e){const t=Xs("never",(()=>!1));return new qs({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${Ks(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function co(e){const t=Object.keys(e);return new qs({type:"type",schema:e,*entries(r){if($s(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>Zs(e)||`Expected an object, but received: ${Ks(e)}`,coercer:e=>Zs(e)?{...e}:e})}function ho(e){const t=e.map((e=>e.type)).join(" | ");return new qs({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=Fs(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ks(r)}`,...i]}})}function lo(){return Xs("unknown",(()=>!0))}function fo(e,t,r){return new qs({...e,coercer:(n,i)=>Ys(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}r(22);const po=BigInt(2**32-1),mo=BigInt(32);function go(e,t=!1){return t?{h:Number(e&po),l:Number(e>>mo&po)}:{h:0|Number(e>>mo&po),l:0|Number(e&po)}}function yo(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=go(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const bo=[],wo=[],vo=[],ko=BigInt(0),_o=BigInt(1),Eo=BigInt(2),xo=BigInt(7),Ao=BigInt(256),Io=BigInt(113);for(let e=0,t=_o,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],bo.push(2*(5*n+r)),wo.push((e+1)*(e+2)/2%64);let i=ko;for(let e=0;e<7;e++)t=(t<<_o^(t>>xo)*Io)%Ao,t&Eo&&(i^=_o<<(_o<<BigInt(e))-_o);vo.push(i)}const[So,Bo]=yo(vo,!0),To=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Mo=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class Oo extends Bs{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ws(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){As||Is(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=To(s,o,1)^r[n],u=Mo(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=wo[r],s=To(t,i,n),o=Mo(t,i,n),a=bo[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=So[n],e[1]^=Bo[n]}r.fill(0)}(this.state32,this.rounds),As||Is(this.state32),this.posOut=0,this.pos=0}update(e){ks(this);const{blockLen:t,state:r}=this,n=(e=Ss(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){ks(this,!1),vs(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ws(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_s(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new Oo(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const Po=((e,t,r)=>Ts((()=>new Oo(t,e,r))))(1,136,32),No=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ro=new Uint32Array(64);class Uo extends zn{constructor(){super(64,32,8,!1),this.A=0|Lo[0],this.B=0|Lo[1],this.C=0|Lo[2],this.D=0|Lo[3],this.E=0|Lo[4],this.F=0|Lo[5],this.G=0|Lo[6],this.H=0|Lo[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Ro[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Ro[e-15],r=Ro[e-2],n=On(t,7)^On(t,18)^t>>>3,i=On(r,17)^On(r,19)^r>>>10;Ro[e]=i+Ro[e-7]+n+Ro[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(On(o,6)^On(o,11)^On(o,25))+Un(o,a,u)+No[e]+Ro[e]|0,h=(On(r,2)^On(r,13)^On(r,22))+Cn(r,n,i)|0;c=u,u=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,s,o,a,u,c)}roundClean(){Ro.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Co=Ln((()=>new Uo));class zo extends Nn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");In(e.outputLen),In(e.blockLen)}(e);const r=Pn(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Bn(this),this.iHash.update(e),this}digestInto(e){Bn(this),Sn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const jo=(e,t,r)=>new zo(e,t).update(r).digest();function Wo(e){void 0!==e.lowS&&ti("lowS",e.lowS),void 0!==e.prehash&&ti("prehash",e.prehash)}jo.create=(e,t)=>new zo(e,t);const{Ph:Do,aT:$o}=i,Zo={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:r}=Zo;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=ii(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?ii(i.length/2|128):"";return ii(e)+s+i+t},decode(e,t){const{Err:r}=Zo;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let s=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+s)}}},_int:{encode(e){const{Err:t}=Zo;if(e<Ko)throw new t("integer: negative integers are not allowed");let r=ii(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=Zo;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Do(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Zo,i="string"==typeof e?$o(e):e;ei(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,s),{v:c,l:h}=n.decode(2,u);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){const{_tlv:t,_int:r}=Zo,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},Ko=BigInt(0),Ho=BigInt(1),Vo=(BigInt(2),BigInt(3));function Fo(e){const t=function(e){const t=Xi(e);return xi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return Ni(e,n)}function a(e){return Ui(e,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:l}=function(e){const t=function(e){const t=Xi(e);xi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=ji(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return pi(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(Qn(e)&&(e=ni(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:ci(fi("private key",e,n))}catch(t){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=Ni(o,s)),yi("private key",o,Ho,s),o}function u(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const c=Ai(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),u=r.mul(i,t),c=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:a,y:u}})),h=Ai((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(s(fi("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(a(e))}static msm(e,t){return Ji(l,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(s,i)),h=r.eql(r.mul(n,a),r.mul(o,i));return c&&h}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Vo),{px:s,py:o,pz:a}=this;let u=r.ZERO,c=r.ZERO,h=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),m=r.mul(s,o);return m=r.add(m,m),h=r.mul(s,a),h=r.add(h,h),u=r.mul(e,h),c=r.mul(i,p),c=r.add(u,c),u=r.sub(f,c),c=r.add(f,c),c=r.mul(u,c),u=r.mul(m,u),h=r.mul(i,h),p=r.mul(e,p),m=r.sub(d,p),m=r.mul(e,m),m=r.add(m,h),h=r.add(d,d),d=r.add(h,d),d=r.add(d,p),d=r.mul(d,m),c=r.add(c,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,m),u=r.sub(u,d),h=r.mul(p,f),h=r.add(h,h),h=r.add(h,h),new l(u,c,h)}add(e){u(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let h=r.ZERO,d=r.ZERO,f=r.ZERO;const p=t.a,m=r.mul(t.b,Vo);let g=r.mul(n,o),y=r.mul(i,a),b=r.mul(s,c),w=r.add(n,i),v=r.add(o,a);w=r.mul(w,v),v=r.add(g,y),w=r.sub(w,v),v=r.add(n,s);let k=r.add(o,c);return v=r.mul(v,k),k=r.add(g,b),v=r.sub(v,k),k=r.add(i,s),h=r.add(a,c),k=r.mul(k,h),h=r.add(y,b),k=r.sub(k,h),f=r.mul(p,v),h=r.mul(m,b),f=r.add(h,f),h=r.sub(y,f),f=r.add(y,f),d=r.mul(h,f),y=r.add(g,g),y=r.add(y,g),b=r.mul(p,b),v=r.mul(m,v),y=r.add(y,b),b=r.sub(g,b),b=r.mul(p,b),v=r.add(v,b),g=r.mul(y,v),d=r.add(d,g),g=r.mul(k,v),h=r.mul(w,h),h=r.sub(h,g),g=r.mul(w,y),f=r.mul(k,f),f=r.add(f,g),new l(h,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;yi("scalar",e,Ko,i);const s=l.ZERO;if(e===Ko)return s;if(this.is0()||e===Ho)return this;if(!n||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,l.normalizeZ);let{k1neg:o,k1:a,k2neg:u,k2:c}=n.splitScalar(e),h=s,d=s,p=this;for(;a>Ko||c>Ko;)a&Ho&&(h=h.add(p)),c&Ho&&(d=d.add(p)),p=p.double(),a>>=Ho,c>>=Ho;return o&&(h=h.negate()),u&&(d=d.negate()),d=new l(r.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:i}=t;let s,o;if(yi("scalar",e,Ho,i),n){const{k1neg:t,k1:i,k2neg:a,k2:u}=n.splitScalar(e);let{p:c,f:h}=this.wNAF(i),{p:d,f:p}=this.wNAF(u);c=f.constTimeNegate(t,c),d=f.constTimeNegate(a,d),d=new l(r.mul(d.px,n.beta),d.py,d.pz),s=c.add(d),o=h.add(p)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return l.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==Ko&&t!==Ho&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return c(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===Ho)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===Ho?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return ti("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(e=!0){return ti("isCompressed",e),ni(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,f=Yi(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return gi(e,Ho,t.n)}}}({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=pi;return ti("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=ci(o);if(!gi(e,Ho,r.ORDER))throw new Error("Point is not on curve");const t=h(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&Ho)===Ho)&&(i=r.neg(i)),{x:e,y:i}}}}),d=e=>ni(li(e,t.nByteLength));function f(e){return e>n>>Ho}const p=(e,t,r)=>ci(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=fi("compactSignature",e,2*r),new m(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Zo.toSig(fi("DER",e));return new m(t,r)}assertValidity(){yi("r",this.r,Ho,n),yi("s",this.s,Ho,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,c=w(fi("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const h=2===s||3===s?n+t.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&s?"03":"02",f=u.fromHex(l+d(h)),p=a(h),m=o(-c*p),g=o(i*p),y=u.BASE.multiplyAndAddUnsafe(f,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ui(this.toDERHex())}toDERHex(){return Zo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ui(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=Di(t.n);return function(e,t,r=!1){const n=e.length,i=Wi(t),s=Di(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=Ni(r?ci(e):hi(e),t-Si)+Si;return r?di(o,i):li(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Qn(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof u}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=ci(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},w=t.bits2int_modN||function(e){return o(b(e))},v=wi(t.nBitLength);function k(e){return yi("num < 2^"+t.nBitLength,e,Ko,v),li(e,t.nByteLength)}const _={lowS:t.lowS,prehash:!1},E={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,n,i=_){const{seed:s,k2sig:h}=function(e,n,i=_){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:h}=t;let{lowS:d,prehash:p,extraEntropy:g}=i;null==d&&(d=!0),e=fi("msgHash",e),Wo(i),p&&(e=fi("prehashed msgHash",s(e)));const y=w(e),v=c(n),E=[k(v),k(y)];if(null!=g&&!1!==g){const e=!0===g?h(r.BYTES):g;E.push(fi("extraEntropy",e))}const x=pi(...E),A=y;return{seed:x,k2sig:function(e){const t=b(e);if(!l(t))return;const r=a(t),n=u.BASE.multiply(t).toAffine(),i=o(n.x);if(i===Ko)return;const s=o(r*o(A+i*v));if(s===Ko)return;let c=(n.x===i?0:2)|Number(n.y&Ho),h=s;return d&&f(s)&&(h=function(e){return f(e)?o(-e):e}(s),c^=1),new m(i,h,c)}}}(e,n,i),d=t;return _i(d.hash.outputLen,d.nByteLength,d.hmac)(s,h)},verify:function(e,r,n,i=E){const s=e;r=fi("msgHash",r),n=fi("publicKey",n);const{lowS:c,prehash:h,format:l}=i;if(Wo(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw new Error("format must be compact or der");const d="string"==typeof s||Qn(s),f=!d&&!l&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!d&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,g;try{if(f&&(p=new m(s.r,s.s)),d){try{"compact"!==l&&(p=m.fromDER(s))}catch(e){if(!(e instanceof Zo.Err))throw e}p||"der"===l||(p=m.fromCompact(s))}g=u.fromHex(n)}catch(e){return!1}if(!p)return!1;if(c&&p.hasHighS())return!1;h&&(r=t.hash(r));const{r:y,s:b}=p,v=w(r),k=a(b),_=o(v*k),x=o(y*k),A=u.BASE.multiplyAndAddUnsafe(g,_,x)?.toAffine();return!!A&&o(A.x)===y},ProjectivePoint:u,Signature:m,utils:g}}function qo(e){return{hash:e,hmac:(t,...r)=>jo(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Sn(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:Rn}}BigInt(4);const Go=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Jo=BigInt(1),Xo=BigInt(2),Qo=(e,t)=>(e+t/Xo)/t;const ea=ji(Go,void 0,void 0,{sqrt:function(e){const t=Go,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,h=c*c*e%t,l=Ri(h,r,t)*h%t,d=Ri(l,r,t)*h%t,f=Ri(d,Xo,t)*c%t,p=Ri(f,i,t)*f%t,m=Ri(p,s,t)*p%t,g=Ri(m,a,t)*m%t,y=Ri(g,u,t)*g%t,b=Ri(y,a,t)*m%t,w=Ri(b,r,t)*h%t,v=Ri(w,o,t)*p%t,k=Ri(v,n,t)*c%t,_=Ri(k,Xo,t);if(!ea.eql(ea.sqr(_),e))throw new Error("Cannot find square root");return _}}),ta=function(e,t){const r=t=>Fo({...e,...qo(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:ea,n:Yo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Yo,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Jo*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Qo(s*e,t),u=Qo(-n*e,t);let c=Ni(e-a*r-u*i,t),h=Ni(-a*n-u*s,t);const l=c>o,d=h>o;if(l&&(c=t-c),d&&(h=t-h),c>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:d,k2:h}}}},Co);BigInt(0),ta.ProjectivePoint,ps.utils.randomPrivateKey;const ra=()=>{const e=ps.utils.randomPrivateKey(),t=na(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},na=ps.getPublicKey;function ia(e){try{return ps.ExtendedPoint.fromHex(e),!0}catch{return!1}}const sa=(e,t)=>ps.sign(e,t.slice(0,32)),oa=ps.verify,aa=e=>An.Buffer.isBuffer(e)?e:e instanceof Uint8Array?An.Buffer.from(e.buffer,e.byteOffset,e.byteLength):An.Buffer.from(e);class ua{constructor(e){Object.assign(this,e)}encode(){return An.Buffer.from((0,zs.serialize)(ca,this))}static decode(e){return(0,zs.deserialize)(ca,this,e)}static decodeUnchecked(e){return(0,zs.deserializeUnchecked)(ca,this,e)}}const ca=new Map;var ha;const la=32;let da=1;class fa extends ua{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=bs().decode(e);if(t.length!=la)throw new Error("Invalid public key input");this._bn=new(gs())(t)}else this._bn=new(gs())(e);if(this._bn.byteLength()>la)throw new Error("Invalid public key input")}}static unique(){const e=new fa(da);return da+=1,new fa(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return bs().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(An.Buffer);if(e.length===la)return e;const t=An.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=An.Buffer.concat([e.toBuffer(),An.Buffer.from(t),r.toBuffer()]),i=Cs(n);return new fa(i)}static createProgramAddressSync(e,t){let r=An.Buffer.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=An.Buffer.concat([r,aa(e)])})),r=An.Buffer.concat([r,t.toBuffer(),An.Buffer.from("ProgramDerivedAddress")]);const n=Cs(r);if(ia(n))throw new Error("Invalid seeds, address must fall off the curve");return new fa(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const i=e.concat(An.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return ia(new fa(e).toBytes())}}ha=fa,fa.default=new ha("11111111111111111111111111111111"),ca.set(fa,{kind:"struct",fields:[["_bn","u256"]]}),new fa("BPFLoader1111111111111111111111111111111111");const pa=1232;class ma extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ma.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ga extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ga.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ya extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ya.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ba{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach(((e,r)=>{t.set(e.toBase58(),r)}));const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((e=>r(e.pubkey))),data:e.data})))}}const wa=(e="publicKey")=>js.av(32,e),va=(e="signature")=>js.av(64,e),ka=(e="string")=>{const t=js.w3([js.DH("length"),js.DH("lengthPadding"),js.av(js.cY(js.DH(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(e,t)=>r(e,t).chars.toString(),i.encode=(e,t,r)=>{const i={chars:An.Buffer.from(e,"utf8")};return n(i,t,r)},i.alloc=e=>js.DH().span+js.DH().span+An.Buffer.from(e,"utf8").length,i};function _a(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return _a({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function Ea(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function xa(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function Aa(e,t){if(!e)throw new Error(t||"Assertion failed")}class Ia{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new Ia(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Aa(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Aa(t.length>0,"Expected at least one writable signer key");const[e]=t[0];Aa(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...t.map((([e])=>new fa(e))),...r.map((([e])=>new fa(e))),...n.map((([e])=>new fa(e))),...i.map((([e])=>new fa(e)))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(t(s)){const t=new fa(i),s=e.findIndex((e=>e.equals(t)));s>=0&&(Aa(s<256,"Max lookup table index exceeded"),r.push(s),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const Sa="Reached end of buffer unexpectedly";function Ba(e){if(0===e.length)throw new Error(Sa);return e.shift()}function Ta(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(Sa);return e.splice(...t)}class Ma{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new fa(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs().decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new ba(this.staticAccountKeys)}static compile(e){const t=Ia.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new ba(n).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:bs().encode(e.data)})));return new Ma({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];xa(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(bs().decode(e.data));let i=[];xa(i,t.length);let s=[];return xa(s,n.length),{programIdIndex:r,keyIndicesCount:An.Buffer.from(i),keyIndices:t,dataLength:An.Buffer.from(s),data:n}}));let n=[];xa(n,r.length);let i=An.Buffer.alloc(pa);An.Buffer.from(n).copy(i);let s=n.length;r.forEach((e=>{const t=js.w3([js.u8("programIdIndex"),js.av(e.keyIndicesCount.length,"keyIndicesCount"),js.O6(js.u8("keyIndex"),e.keyIndices.length,"keyIndices"),js.av(e.dataLength.length,"dataLength"),js.O6(js.u8("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t})),i=i.slice(0,s);const o=js.w3([js.av(1,"numRequiredSignatures"),js.av(1,"numReadonlySignedAccounts"),js.av(1,"numReadonlyUnsignedAccounts"),js.av(t.length,"keyCount"),js.O6(wa("key"),e,"keys"),wa("recentBlockhash")]),a={numRequiredSignatures:An.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:An.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:An.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:An.Buffer.from(t),keys:this.accountKeys.map((e=>aa(e.toBytes()))),recentBlockhash:bs().decode(this.recentBlockhash)};let u=An.Buffer.alloc(2048);const c=o.encode(a,u);return i.copy(u,c),u.slice(0,c+i.length)}static from(e){let t=[...e];const r=Ba(t);if(r!==(127&r))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=Ba(t),i=Ba(t),s=Ea(t);let o=[];for(let e=0;e<s;e++){const e=Ta(t,0,la);o.push(new fa(An.Buffer.from(e)))}const a=Ta(t,0,la),u=Ea(t);let c=[];for(let e=0;e<u;e++){const e=Ba(t),r=Ta(t,0,Ea(t)),n=Ta(t,0,Ea(t)),i=bs().encode(An.Buffer.from(n));c.push({programIdIndex:e,accounts:r,data:i})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:bs().encode(An.Buffer.from(a)),accountKeys:o,instructions:c};return new Ma(h)}}class Oa{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ba(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=Ia.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:s}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...s)}}const[s,o]=t.getMessageComponents(),a=new ba(o,n).compileInstructions(e.instructions);return new Oa({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const e=Array();xa(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();xa(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();xa(i,this.addressTableLookups.length);const s=js.w3([js.u8("prefix"),js.w3([js.u8("numRequiredSignatures"),js.u8("numReadonlySignedAccounts"),js.u8("numReadonlyUnsignedAccounts")],"header"),js.av(e.length,"staticAccountKeysLength"),js.O6(wa(),this.staticAccountKeys.length,"staticAccountKeys"),wa("recentBlockhash"),js.av(r.length,"instructionsLength"),js.av(t.length,"serializedInstructions"),js.av(i.length,"addressTableLookupsLength"),js.av(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(pa),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:bs().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(pa);for(const r of this.compiledInstructions){const n=Array();xa(n,r.accountKeyIndexes.length);const i=Array();xa(i,r.data.length),e+=js.w3([js.u8("programIdIndex"),js.av(n.length,"encodedAccountKeyIndexesLength"),js.O6(js.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),js.av(i.length,"encodedDataLength"),js.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(pa);for(const r of this.addressTableLookups){const n=Array();xa(n,r.writableIndexes.length);const i=Array();xa(i,r.readonlyIndexes.length),e+=js.w3([wa("accountKey"),js.av(n.length,"encodedWritableIndexesLength"),js.O6(js.u8(),r.writableIndexes.length,"writableIndexes"),js.av(i.length,"encodedReadonlyIndexesLength"),js.O6(js.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Ba(t),n=127&r;Aa(r!==n,"Expected versioned message but received legacy message"),Aa(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:Ba(t),numReadonlySignedAccounts:Ba(t),numReadonlyUnsignedAccounts:Ba(t)},s=[],o=Ea(t);for(let e=0;e<o;e++)s.push(new fa(Ta(t,0,la)));const a=bs().encode(Ta(t,0,la)),u=Ea(t),c=[];for(let e=0;e<u;e++){const e=Ba(t),r=Ta(t,0,Ea(t)),n=Ea(t),i=new Uint8Array(Ta(t,0,n));c.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const h=Ea(t),l=[];for(let e=0;e<h;e++){const e=new fa(Ta(t,0,la)),r=Ta(t,0,Ea(t)),n=Ta(t,0,Ea(t));l.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new Oa({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:c,addressTableLookups:l})}}const Pa={deserializeMessageVersion(e){const t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{const t=Pa.deserializeMessageVersion(e);if("legacy"===t)return Ma.from(e);if(0===t)return Oa.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},Na=An.Buffer.alloc(64).fill(0);class La{constructor(e){this.keys=void 0,this.programId=void 0,this.data=An.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Ra{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new La(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&mrDummy("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new fa(e),isSigner:!1,isWritable:!1})}));const s=[];i.forEach((e=>{const t=e.pubkey.toString(),r=s.findIndex((e=>e.pubkey.toString()===t));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const o=s.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=s.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);s[t].isSigner||(s[t].isSigner=!0,mrDummy("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,c=0;const h=[],l=[];s.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),a+=1,r||(u+=1)):(l.push(e.toString()),r||(c+=1))}));const d=h.concat(l),f=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map((e=>d.indexOf(e.pubkey.toString()))),data:bs().encode(t)}}));return f.forEach((e=>{Aa(e.programIdIndex>=0),e.accounts.forEach((e=>Aa(e>=0)))})),new Ma({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:d,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every(((e,r)=>t[r].equals(e.publicKey)))||(this.signatures=t.map((e=>({signature:null,publicKey:e})))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=sa(r,e.secretKey);this._addSignature(e.publicKey,aa(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Aa(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=An.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):oa(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];xa(r,t.length);const n=r.length+64*t.length+e.length,i=An.Buffer.alloc(n);return Aa(t.length<256),An.Buffer.from(r).copy(i,0),t.forEach((({signature:e},t)=>{null!==e&&(Aa(64===e.length,"signature has invalid length"),An.Buffer.from(e).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),Aa(i.length<=pa,`Transaction too large: ${i.length} > 1232`),i}get keys(){return Aa(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Aa(1===this.instructions.length),this.instructions[0].programId}get data(){return Aa(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=Ea(t);let n=[];for(let e=0;e<r;e++){const e=Ta(t,0,64);n.push(bs().encode(An.Buffer.from(e)))}return Ra.populate(Ma.from(t),n)}static populate(e,t=[]){const r=new Ra;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==bs().encode(Na)?null:bs().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new La({keys:n,programId:e.accountKeys[t.programIdIndex],data:bs().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class Ua{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)Aa(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();xa(t,this.signatures.length);const r=js.w3([js.av(t.length,"encodedSignaturesLength"),js.O6(va(),this.signatures.length,"signatures"),js.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=Ea(t);for(let e=0;e<n;e++)r.push(new Uint8Array(Ta(t,0,64)));const i=Pa.deserialize(new Uint8Array(t));return new Ua(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));Aa(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=sa(t,n.secretKey)}}addSignature(e,t){Aa(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));Aa(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const Ca=new fa("SysvarC1ock11111111111111111111111111111111"),za=(new fa("SysvarEpochSchedu1e111111111111111111111111"),new fa("Sysvar1nstructions1111111111111111111111111"),new fa("SysvarRecentB1ockHashes11111111111111111111")),ja=new fa("SysvarRent111111111111111111111111111111111"),Wa=(new fa("SysvarRewards111111111111111111111111111111"),new fa("SysvarS1otHashes111111111111111111111111111"),new fa("SysvarS1otHistory11111111111111111111111111"),new fa("SysvarStakeHistory1111111111111111111111111"));class Da extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(e){case"send":o=`Transaction ${t} resulted in an error. \n${r}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${r}. \n`+i+s;break;default:o=`Unknown action '${e}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}async function $a(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await e.sendTransaction(t,r,i);let o;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null!=n?.abortSignal&&mrDummy("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(s,n&&n.commitment)).value;if(o.err){if(null!=s)throw new Da({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`)}return s}function Za(e){return new Promise((t=>setTimeout(t,e)))}function Ka(e,t){const r=e.layout.span>=0?e.layout.span:_a(e,t),n=An.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}Error;const Ha=js.I0("lamportsPerSignature"),Va=js.w3([js.DH("version"),js.DH("state"),wa("authorizedPubkey"),wa("nonce"),js.w3([Ha],"feeCalculator")]).span,Fa=e=>{const t=(0,js.av)(8,e),{encode:r,decode:n}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(t),i=t;return i.decode=(e,t)=>{const r=n(e,t);return(0,Ws.k5)(An.Buffer.from(r))},i.encode=(e,t,n)=>{const i=(0,Ws.Bq)(e,8);return r(i,t,n)},i};const qa=Object.freeze({Create:{index:0,layout:js.w3([js.DH("instruction"),js.Wg("lamports"),js.Wg("space"),wa("programId")])},Assign:{index:1,layout:js.w3([js.DH("instruction"),wa("programId")])},Transfer:{index:2,layout:js.w3([js.DH("instruction"),Fa("lamports")])},CreateWithSeed:{index:3,layout:js.w3([js.DH("instruction"),wa("base"),ka("seed"),js.Wg("lamports"),js.Wg("space"),wa("programId")])},AdvanceNonceAccount:{index:4,layout:js.w3([js.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:js.w3([js.DH("instruction"),js.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:js.w3([js.DH("instruction"),wa("authorized")])},AuthorizeNonceAccount:{index:7,layout:js.w3([js.DH("instruction"),wa("authorized")])},Allocate:{index:8,layout:js.w3([js.DH("instruction"),js.Wg("space")])},AllocateWithSeed:{index:9,layout:js.w3([js.DH("instruction"),wa("base"),ka("seed"),js.Wg("space"),wa("programId")])},AssignWithSeed:{index:10,layout:js.w3([js.DH("instruction"),wa("base"),ka("seed"),wa("programId")])},TransferWithSeed:{index:11,layout:js.w3([js.DH("instruction"),Fa("lamports"),ka("seed"),wa("programId")])},UpgradeNonceAccount:{index:12,layout:js.w3([js.DH("instruction")])}});class Ga{constructor(){}static createAccount(e){const t=Ka(qa.Create,{lamports:e.lamports,space:e.space,programId:aa(e.programId.toBuffer())});return new La({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=Ka(qa.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:aa(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Ka(qa.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new La({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=Ka(qa.AssignWithSeed,{base:aa(e.basePubkey.toBuffer()),seed:e.seed,programId:aa(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ka(qa.Assign,{programId:aa(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new La({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ka(qa.CreateWithSeed,{base:aa(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:aa(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new La({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new Ra;"basePubkey"in e&&"seed"in e?t.add(Ga.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Va,programId:this.programId})):t.add(Ga.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Va,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=Ka(qa.InitializeNonceAccount,{authorized:aa(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:za,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new La(r)}static nonceAdvance(e){const t=Ka(qa.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:za,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new La(r)}static nonceWithdraw(e){const t=Ka(qa.WithdrawNonceAccount,{lamports:e.lamports});return new La({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:za,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=Ka(qa.AuthorizeNonceAccount,{authorized:aa(e.newAuthorizedPubkey.toBuffer())});return new La({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=Ka(qa.AllocateWithSeed,{base:aa(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:aa(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ka(qa.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new La({keys:r,programId:this.programId,data:t})}}Ga.programId=new fa("11111111111111111111111111111111");class Ya{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Ya.chunkSize)+1+1)}static async load(e,t,r,n,i){{const s=await e.getMinimumBalanceForRentExemption(i.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==i.length&&(a=a||new Ra,a.add(Ga.allocate({accountPubkey:r.publicKey,space:i.length}))),o.owner.equals(n)||(a=a||new Ra,a.add(Ga.assign({accountPubkey:r.publicKey,programId:n}))),o.lamports<s&&(a=a||new Ra,a.add(Ga.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:s-o.lamports})))}else a=(new Ra).add(Ga.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:s>0?s:1,space:i.length,programId:n}));null!==a&&await $a(e,a,[t,r],{commitment:"confirmed"})}const s=js.w3([js.DH("instruction"),js.DH("offset"),js.DH("bytesLength"),js.DH("bytesLengthPadding"),js.O6(js.u8("byte"),js.cY(js.DH(),-8),"bytes")]),o=Ya.chunkSize;let a=0,u=i,c=[];for(;u.length>0;){const i=u.slice(0,o),h=An.Buffer.alloc(o+16);s.encode({instruction:0,offset:a,bytes:i,bytesLength:0,bytesLengthPadding:0},h);const l=(new Ra).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:h});if(c.push($a(e,l,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await Za(1e3/e)}a+=o,u=u.slice(o)}await Promise.all(c);{const i=js.w3([js.DH("instruction")]),s=An.Buffer.alloc(i.span);i.encode({instruction:1},s);const o=(new Ra).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1}],programId:n,data:s}),a="processed",u=await e.sendTransaction(o,[t,r],{preflightCommitment:a}),{context:c,value:h}=await e.confirmTransaction({signature:u,lastValidBlockHeight:o.lastValidBlockHeight,blockhash:o.recentBlockhash},a);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);for(;;){try{if(await e.getSlot({commitment:a})>c.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(200))))}}return!0}}Ya.chunkSize=932,new fa("BPFLoader2111111111111111111111111111111111"),globalThis.fetch,js.w3([js.DH("typeIndex"),Fa("deactivationSlot"),js.I0("lastExtendedSlot"),js.u8("lastExtendedStartIndex"),js.u8(),js.O6(wa(),js.cY(js.u8(),-1),"authority")]);const Ja=fo(to(fa),ao(),(e=>new fa(e))),Xa=uo([ao(),ro("base64")]),Qa=fo(to(An.Buffer),Xa,(e=>An.Buffer.from(e[0],"base64")));function eu(e){return ho([co({jsonrpc:ro("2.0"),id:ao(),result:e}),co({jsonrpc:ro("2.0"),id:ao(),error:co({code:lo(),message:ao(),data:so(Xs("any",(()=>!0)))})})])}const tu=eu(lo());function ru(e){return fo(eu(e),tu,(t=>"error"in t?t:{...t,result:Gs(t.result,e)}))}function nu(e){return ru(co({context:co({slot:io()}),value:e}))}function iu(e){return co({context:co({slot:io()}),value:e})}const su=co({foundation:io(),foundationTerm:io(),initial:io(),taper:io(),terminal:io()}),ou=(ru(Qs(no(co({epoch:io(),effectiveSlot:io(),amount:io(),postBalance:io(),commission:so(no(io()))})))),Qs(co({slot:io(),prioritizationFee:io()}))),au=co({total:io(),validator:io(),foundation:io(),epoch:io()}),uu=co({epoch:io(),slotIndex:io(),slotsInEpoch:io(),absoluteSlot:io(),blockHeight:so(io()),transactionCount:so(io())}),cu=co({slotsPerEpoch:io(),leaderScheduleSlotOffset:io(),warmup:eo(),firstNormalEpoch:io(),firstNormalSlot:io()}),hu=oo(ao(),Qs(io())),lu=no(ho([co({}),ao()])),du=co({err:lu}),fu=ro("receivedSignature"),pu=(co({"solana-core":ao(),"feature-set":so(io())}),co({program:ao(),programId:Ja,parsed:lo()})),mu=co({programId:Ja,accounts:Qs(Ja),data:ao()});nu(co({err:no(ho([co({}),ao()])),logs:no(Qs(ao())),accounts:so(no(Qs(no(co({executable:eo(),owner:ao(),lamports:io(),data:Qs(ao()),rentEpoch:so(io())}))))),unitsConsumed:so(io()),returnData:so(no(co({programId:ao(),data:uo([ao(),ro("base64")])}))),innerInstructions:so(no(Qs(co({index:io(),instructions:Qs(ho([pu,mu]))}))))})),nu(co({byIdentity:oo(ao(),Qs(io())),range:co({firstSlot:io(),lastSlot:io()})})),ru(su),ru(au),ru(ou),ru(uu),ru(cu),ru(hu),ru(io()),nu(co({total:io(),circulating:io(),nonCirculating:io(),nonCirculatingAccounts:Qs(Ja)}));const gu=co({amount:ao(),uiAmount:no(io()),decimals:io(),uiAmountString:so(ao())}),yu=(nu(Qs(co({address:Ja,amount:ao(),uiAmount:no(io()),decimals:io(),uiAmountString:so(ao())}))),nu(Qs(co({pubkey:Ja,account:co({executable:eo(),owner:Ja,lamports:io(),data:Qa,rentEpoch:io()})}))),co({program:ao(),parsed:lo(),space:io()})),bu=(nu(Qs(co({pubkey:Ja,account:co({executable:eo(),owner:Ja,lamports:io(),data:yu,rentEpoch:io()})}))),nu(Qs(co({lamports:io(),address:Ja}))),co({executable:eo(),owner:Ja,lamports:io(),data:Qa,rentEpoch:io()})),wu=(co({pubkey:Ja,account:bu}),fo(ho([to(An.Buffer),yu]),ho([Xa,yu]),(e=>Array.isArray(e)?Gs(e,Qa):e))),vu=co({executable:eo(),owner:Ja,lamports:io(),data:wu,rentEpoch:io()}),ku=(co({pubkey:Ja,account:vu}),co({state:ho([ro("active"),ro("inactive"),ro("activating"),ro("deactivating")]),active:io(),inactive:io()}),ru(Qs(co({signature:ao(),slot:io(),err:lu,memo:no(ao()),blockTime:so(no(io()))}))),ru(Qs(co({signature:ao(),slot:io(),err:lu,memo:no(ao()),blockTime:so(no(io()))}))),co({subscription:io(),result:iu(bu)}),co({pubkey:Ja,account:bu})),_u=(co({subscription:io(),result:iu(ku)}),co({parent:io(),slot:io(),root:io()})),Eu=(co({subscription:io(),result:_u}),ho([co({type:ho([ro("firstShredReceived"),ro("completed"),ro("optimisticConfirmation"),ro("root")]),slot:io(),timestamp:io()}),co({type:ro("createdBank"),parent:io(),slot:io(),timestamp:io()}),co({type:ro("frozen"),slot:io(),timestamp:io(),stats:co({numTransactionEntries:io(),numSuccessfulTransactions:io(),numFailedTransactions:io(),maxTransactionsPerEntry:io()})}),co({type:ro("dead"),slot:io(),timestamp:io(),err:ao()})])),xu=(co({subscription:io(),result:Eu}),co({subscription:io(),result:iu(ho([du,fu]))}),co({subscription:io(),result:io()}),co({pubkey:ao(),gossip:no(ao()),tpu:no(ao()),rpc:no(ao()),version:no(ao())}),co({votePubkey:ao(),nodePubkey:ao(),activatedStake:io(),epochVoteAccount:eo(),epochCredits:Qs(uo([io(),io(),io()])),commission:io(),lastVote:io(),rootSlot:no(io())})),Au=(ru(co({current:Qs(xu),delinquent:Qs(xu)})),ho([ro("processed"),ro("confirmed"),ro("finalized")])),Iu=co({slot:io(),confirmations:no(io()),err:lu,confirmationStatus:so(Au)}),Su=(nu(Qs(no(Iu))),ru(io()),co({accountKey:Ja,writableIndexes:Qs(io()),readonlyIndexes:Qs(io())})),Bu=co({signatures:Qs(ao()),message:co({accountKeys:Qs(ao()),header:co({numRequiredSignatures:io(),numReadonlySignedAccounts:io(),numReadonlyUnsignedAccounts:io()}),instructions:Qs(co({accounts:Qs(io()),data:ao(),programIdIndex:io()})),recentBlockhash:ao(),addressTableLookups:so(Qs(Su))})}),Tu=co({pubkey:Ja,signer:eo(),writable:eo(),source:so(ho([ro("transaction"),ro("lookupTable")]))}),Mu=co({accountKeys:Qs(Tu),signatures:Qs(ao())}),Ou=co({parsed:lo(),program:ao(),programId:Ja}),Pu=co({accounts:Qs(Ja),data:ao(),programId:Ja}),Nu=fo(ho([Pu,Ou]),ho([co({parsed:lo(),program:ao(),programId:ao()}),co({accounts:Qs(ao()),data:ao(),programId:ao()})]),(e=>Gs(e,"accounts"in e?Pu:Ou))),Lu=co({signatures:Qs(ao()),message:co({accountKeys:Qs(Tu),instructions:Qs(Nu),recentBlockhash:ao(),addressTableLookups:so(no(Qs(Su)))})}),Ru=co({accountIndex:io(),mint:ao(),owner:so(ao()),programId:so(ao()),uiTokenAmount:gu}),Uu=co({writable:Qs(Ja),readonly:Qs(Ja)}),Cu=co({err:lu,fee:io(),innerInstructions:so(no(Qs(co({index:io(),instructions:Qs(co({accounts:Qs(io()),data:ao(),programIdIndex:io()}))})))),preBalances:Qs(io()),postBalances:Qs(io()),logMessages:so(no(Qs(ao()))),preTokenBalances:so(no(Qs(Ru))),postTokenBalances:so(no(Qs(Ru))),loadedAddresses:so(Uu),computeUnitsConsumed:so(io())}),zu=co({err:lu,fee:io(),innerInstructions:so(no(Qs(co({index:io(),instructions:Qs(Nu)})))),preBalances:Qs(io()),postBalances:Qs(io()),logMessages:so(no(Qs(ao()))),preTokenBalances:so(no(Qs(Ru))),postTokenBalances:so(no(Qs(Ru))),loadedAddresses:so(Uu),computeUnitsConsumed:so(io())}),ju=ho([ro(0),ro("legacy")]),Wu=co({pubkey:ao(),lamports:io(),postBalance:no(io()),rewardType:no(ao()),commission:so(no(io()))}),Du=(ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),transactions:Qs(co({transaction:Bu,meta:no(Cu),version:so(ju)})),rewards:so(Qs(Wu)),blockTime:no(io()),blockHeight:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),rewards:so(Qs(Wu)),blockTime:no(io()),blockHeight:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),transactions:Qs(co({transaction:Mu,meta:no(Cu),version:so(ju)})),rewards:so(Qs(Wu)),blockTime:no(io()),blockHeight:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),transactions:Qs(co({transaction:Lu,meta:no(zu),version:so(ju)})),rewards:so(Qs(Wu)),blockTime:no(io()),blockHeight:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),transactions:Qs(co({transaction:Mu,meta:no(zu),version:so(ju)})),rewards:so(Qs(Wu)),blockTime:no(io()),blockHeight:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),rewards:so(Qs(Wu)),blockTime:no(io()),blockHeight:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),transactions:Qs(co({transaction:Bu,meta:no(Cu)})),rewards:so(Qs(Wu)),blockTime:no(io())}))),ru(no(co({blockhash:ao(),previousBlockhash:ao(),parentSlot:io(),signatures:Qs(ao()),blockTime:no(io())}))),ru(no(co({slot:io(),meta:no(Cu),blockTime:so(no(io())),transaction:Bu,version:so(ju)}))),ru(no(co({slot:io(),transaction:Lu,meta:no(zu),blockTime:so(no(io())),version:so(ju)}))),nu(co({blockhash:ao(),feeCalculator:co({lamportsPerSignature:io()})})),nu(co({blockhash:ao(),lastValidBlockHeight:io()})),nu(eo()),ru(Qs(co({slot:io(),numTransactions:io(),numSlots:io(),samplePeriodSecs:io()}))),nu(no(co({feeCalculator:co({lamportsPerSignature:io()})}))),ru(ao()),ru(ao()),co({err:lu,logs:Qs(ao()),signature:ao()}));co({result:iu(Du),subscription:io()});class $u{constructor(e){this._keypair=void 0,this._keypair=e??ra()}static generate(){return new $u(ra())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=na(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new $u({publicKey:r,secretKey:e})}static fromSeed(e){const t=na(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new $u({publicKey:t,secretKey:r})}get publicKey(){return new fa(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:js.w3([js.DH("instruction"),Fa("recentSlot"),js.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:js.w3([js.DH("instruction")])},ExtendLookupTable:{index:2,layout:js.w3([js.DH("instruction"),Fa(),js.O6(wa(),js.cY(js.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:js.w3([js.DH("instruction")])},CloseLookupTable:{index:4,layout:js.w3([js.DH("instruction")])}});new fa("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:js.w3([js.u8("instruction"),js.DH("units"),js.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:js.w3([js.u8("instruction"),js.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:js.w3([js.u8("instruction"),js.DH("units")])},SetComputeUnitPrice:{index:3,layout:js.w3([js.u8("instruction"),Fa("microLamports")])}});new fa("ComputeBudget111111111111111111111111111111");const Zu=js.w3([js.u8("numSignatures"),js.u8("padding"),js.NX("signatureOffset"),js.NX("signatureInstructionIndex"),js.NX("publicKeyOffset"),js.NX("publicKeyInstructionIndex"),js.NX("messageDataOffset"),js.NX("messageDataSize"),js.NX("messageInstructionIndex")]);class Ku{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:i}=e;Aa(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),Aa(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const s=Zu.span,o=s+t.length,a=o+n.length,u=An.Buffer.alloc(a+r.length),c=null==i?65535:i;return Zu.encode({numSignatures:1,padding:0,signatureOffset:o,signatureInstructionIndex:c,publicKeyOffset:s,publicKeyInstructionIndex:c,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:c},u),u.fill(t,s),u.fill(n,o),u.fill(r,a),new La({keys:[],programId:Ku.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Aa(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=$u.fromSecretKey(t),i=e.publicKey.toBytes(),s=sa(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}Ku.programId=new fa("Ed25519SigVerify111111111111111111111111111"),ta.utils.isValidPrivateKey;const Hu=ta.getPublicKey,Vu=js.w3([js.u8("numSignatures"),js.NX("signatureOffset"),js.u8("signatureInstructionIndex"),js.NX("ethAddressOffset"),js.u8("ethAddressInstructionIndex"),js.NX("messageDataOffset"),js.NX("messageDataSize"),js.u8("messageInstructionIndex"),js.av(20,"ethAddress"),js.av(64,"signature"),js.u8("recoveryId")]);class Fu{constructor(){}static publicKeyToEthAddress(e){Aa(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return An.Buffer.from(Po(aa(e))).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return Fu.createInstructionWithEthAddress({ethAddress:Fu.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:i,instructionIndex:s=0}=e;let o;o="string"==typeof t?t.startsWith("0x")?An.Buffer.from(t.substr(2),"hex"):An.Buffer.from(t,"hex"):t,Aa(20===o.length,`Address must be 20 bytes but received ${o.length} bytes`);const a=12+o.length,u=a+n.length+1,c=An.Buffer.alloc(Vu.span+r.length);return Vu.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:s,signature:aa(n),ethAddress:aa(o),recoveryId:i},c),c.fill(aa(r),Vu.span),new La({keys:[],programId:Fu.programId,data:c})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Aa(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=aa(t),i=Hu(e,!1).slice(1),s=An.Buffer.from(Po(aa(r))),[o,a]=((e,t)=>{const r=ta.sign(e,t);return[r.toCompactRawBytes(),r.recovery]})(s,e);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,recoveryId:a,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var qu;Fu.programId=new fa("KeccakSecp256k11111111111111111111111111111");const Gu=new fa("StakeConfig11111111111111111111111111111111");class Yu{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}qu=Yu,Yu.default=new qu(0,0,fa.default);const Ju=Object.freeze({Initialize:{index:0,layout:js.w3([js.DH("instruction"),((e="authorized")=>js.w3([wa("staker"),wa("withdrawer")],e))(),((e="lockup")=>js.w3([js.Wg("unixTimestamp"),js.Wg("epoch"),wa("custodian")],e))()])},Authorize:{index:1,layout:js.w3([js.DH("instruction"),wa("newAuthorized"),js.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:js.w3([js.DH("instruction")])},Split:{index:3,layout:js.w3([js.DH("instruction"),js.Wg("lamports")])},Withdraw:{index:4,layout:js.w3([js.DH("instruction"),js.Wg("lamports")])},Deactivate:{index:5,layout:js.w3([js.DH("instruction")])},Merge:{index:7,layout:js.w3([js.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:js.w3([js.DH("instruction"),wa("newAuthorized"),js.DH("stakeAuthorizationType"),ka("authoritySeed"),wa("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Xu{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||Yu.default,s=Ka(Ju.Initialize,{authorized:{staker:aa(r.staker.toBuffer()),withdrawer:aa(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:aa(i.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new La(o)}static createAccountWithSeed(e){const t=new Ra;t.add(Ga.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new Ra;t.add(Ga.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=Ka(Ju.Delegate);return(new Ra).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:Wa,isSigner:!1,isWritable:!1},{pubkey:Gu,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=Ka(Ju.Authorize,{newAuthorized:aa(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ca,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Ra).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,u=Ka(Ju.AuthorizeWithSeed,{newAuthorized:aa(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:aa(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ca,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!0,isWritable:!1}),(new Ra).add({keys:c,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=Ka(Ju.Split,{lamports:i});return new La({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static split(e,t){const r=new Ra;return r.add(Ga.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,u=new Ra;return u.add(Ga.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),t&&t>0&&u.add(Ga.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=Ka(Ju.Merge);return(new Ra).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:Wa,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=Ka(Ju.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:Wa,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Ra).add({keys:a,programId:this.programId,data:o})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=Ka(Ju.Deactivate);return(new Ra).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Xu.programId=new fa("Stake11111111111111111111111111111111111111"),Xu.space=200;const Qu=Object.freeze({InitializeAccount:{index:0,layout:js.w3([js.DH("instruction"),((e="voteInit")=>js.w3([wa("nodePubkey"),wa("authorizedVoter"),wa("authorizedWithdrawer"),js.u8("commission")],e))()])},Authorize:{index:1,layout:js.w3([js.DH("instruction"),wa("newAuthorized"),js.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:js.w3([js.DH("instruction"),js.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:js.w3([js.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:js.w3([js.DH("instruction"),((e="voteAuthorizeWithSeedArgs")=>js.w3([js.DH("voteAuthorizationType"),wa("currentAuthorityDerivedKeyOwnerPubkey"),ka("currentAuthorityDerivedKeySeed"),wa("newAuthorized")],e))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class ec{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=Ka(Qu.InitializeAccount,{voteInit:{nodePubkey:aa(n.nodePubkey.toBuffer()),authorizedVoter:aa(n.authorizedVoter.toBuffer()),authorizedWithdrawer:aa(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new La(s)}static createAccount(e){const t=new Ra;return t.add(Ga.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=Ka(Qu.Authorize,{newAuthorized:aa(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Ra).add({keys:o,programId:this.programId,data:s})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=e,a=Ka(Qu.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:aa(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:aa(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Ca,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Ra).add({keys:u,programId:this.programId,data:a})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=Ka(Qu.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Ra).add({keys:o,programId:this.programId,data:s})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return ec.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=Ka(Qu.UpdateValidatorIdentity),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Ra).add({keys:s,programId:this.programId,data:i})}}ec.programId=new fa("Vote111111111111111111111111111111111111111"),ec.space=3762,new fa("Va1idator1nfo111111111111111111111111111111"),co({name:ao(),website:so(ao()),details:so(ao()),iconUrl:so(ao()),keybaseUsername:so(ao())}),new fa("Vote111111111111111111111111111111111111111"),js.w3([wa("nodePubkey"),wa("authorizedWithdrawer"),js.u8("commission"),js.I0(),js.O6(js.w3([js.I0("slot"),js.DH("confirmationCount")]),js.cY(js.DH(),-8),"votes"),js.u8("rootSlotValid"),js.I0("rootSlot"),js.I0(),js.O6(js.w3([js.I0("epoch"),wa("authorizedVoter")]),js.cY(js.DH(),-8),"authorizedVoters"),js.w3([js.O6(js.w3([wa("authorizedPubkey"),js.I0("epochOfLastAuthorizedSwitch"),js.I0("targetEpoch")]),32,"buf"),js.I0("idx"),js.u8("isEmpty")],"priorVoters"),js.I0(),js.O6(js.w3([js.I0("epoch"),js.I0("credits"),js.I0("prevCredits")]),js.cY(js.DH(),-8),"epochCredits"),js.w3([js.I0("slot"),js.I0("timestamp")],"lastTimestamp")]),e=r.hmd(e);var tc=Object.defineProperty,rc=(e,t,r)=>((e,t,r)=>t in e?tc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class nc{constructor(){rc(this,"subscriptions",{})}on(e){const{event:t,handler:r}=e;this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(r)}off(e){const{event:t,handler:r}=e;this.subscriptions[t]&&(this.subscriptions[t]=this.subscriptions[t].filter((e=>e!==r)))}emit(e,t){this.subscriptions[e]&&this.subscriptions[e].forEach((e=>e(t)))}}const ic="okxWidget";function sc(e,t,r){const n={key:ic,method:t,..."object"==typeof r?r:{}};null==e||e.postMessage(n,"*")}function oc(e,t,r){const n=e=>{!function(e){return"object"==typeof e&&null!==e&&"key"in e&&"method"in e&&"string"==typeof e.key&&"string"==typeof e.method}(e.data)||e.data.key!==ic||e.data.method!==t||r(e.data)};return e.addEventListener("message",n),n}function ac(e,t,r){e.removeEventListener("message",r)}function uc(e,t){e.removeEventListener("message",t)}var cc=(e=>(e.ACTIVATE="ACTIVATE",e.UPDATE_HEIGHT="UPDATE_HEIGHT",e.SET_FULL_HEIGHT="SET_FULL_HEIGHT",e.EMIT_OKX_EVENT="EMIT_OKX_EVENT",e.PROVIDER_RPC_REQUEST="PROVIDER_RPC_REQUEST",e.INTERCEPT_WINDOW_OPEN="INTERCEPT_WINDOW_OPEN",e.LOAD_READY="LOAD_READY",e))(cc||{}),hc=(e=>(e.UPDATE_PARAMS="UPDATE_PARAMS",e.UPDATE_APP_DATA="UPDATE_APP_DATA",e.PROVIDER_RPC_RESPONSE="PROVIDER_RPC_RESPONSE",e.PROVIDER_ON_EVENT="PROVIDER_ON_EVENT",e.PROVIDER_ON_EVENT_CONNECT="PROVIDER_ON_EVENT_CONNECT",e.PROVIDER_ONEVENT_WALLET_SATUS="PROVIDER_ONEVENT_WALLET_SATUS",e.PROVIDER_ONEVENT_WALLET_SOLANA_SATUS="PROVIDER_ONEVENT_WALLET_SOLANA_SATUS",e.UPDATE_PROVIDER="UPDATE_PROVIDER",e))(hc||{}),lc=(e=>(e.PROVIDER_ON_EVENT_CONNECT="PROVIDER_ON_EVENT_CONNECT",e.PROVIDER_ON_EVENT="PROVIDER_ON_EVENT",e.PROVIDER_ONEVENT_WALLET_SATUS="PROVIDER_ONEVENT_WALLET_SATUS",e.NO_WALLET_CONNECT="NO_WALLET_CONNECT",e))(lc||{}),dc=(e=>(e.SWAP="swap",e.BRIDGE="bridge",e.AUTO="auto",e))(dc||{}),fc=(e=>(e.EVM="EVM",e.SOLANA="SOLANA",e.WALLET_CONNECT="WALLET_CONNECT",e))(fc||{});class pc{constructor(e,t=[]){rc(this,"eventEmitter",new nc),rc(this,"listeners",[]),rc(this,"widgetListener"),this.contentWindow=e,this.updateListeners(t),this.widgetListener=oc(this.contentWindow,cc.EMIT_OKX_EVENT,(e=>{const t=e.payload||(null==e?void 0:e.params);mrDummy("eventEmitter:",{okxEvent:e,event:e.event,payload:t}),this.eventEmitter.emit(e.event,t)}))}stopListeningIframe(){uc(this.contentWindow,this.widgetListener)}updateListeners(e){for(const e of this.listeners)this.eventEmitter.off(e);this.listeners=e||[];for(const e of this.listeners)this.eventEmitter.on(e)}}var mc="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,gc="object"==typeof self&&self&&self.Object===Object&&self,yc=mc||gc||Function("return this")(),bc=yc.Symbol,wc=Object.prototype,vc=wc.hasOwnProperty,kc=wc.toString,_c=bc?bc.toStringTag:void 0,Ec=Object.prototype.toString,xc=bc?bc.toStringTag:void 0;function Ac(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":xc&&xc in Object(e)?function(e){var t=vc.call(e,_c),r=e[_c];try{e[_c]=void 0;var n=!0}catch{}var i=kc.call(e);return n&&(t?e[_c]=r:delete e[_c]),i}(e):function(e){return Ec.call(e)}(e)}function Ic(e){return null!=e&&"object"==typeof e}var Sc=Array.isArray;function Bc(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Tc(e){return e}function Mc(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var Oc=/^(?:0|[1-9]\d*)$/;function Pc(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Oc.test(e))&&e>-1&&e%1==0&&e<t}function Nc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Lc(e){return null!=e&&Nc(e.length)&&!function(e){if(!Bc(e))return!1;var t=Ac(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)}var Rc=Object.prototype;function Uc(e){return Ic(e)&&"[object Arguments]"==Ac(e)}var Cc=Object.prototype,zc=Cc.hasOwnProperty,jc=Cc.propertyIsEnumerable,Wc=Uc(function(){return arguments}())?Uc:function(e){return Ic(e)&&zc.call(e,"callee")&&!jc.call(e,"callee")},Dc="object"==typeof exports&&exports&&!exports.nodeType&&exports,$c=Dc&&e&&!e.nodeType&&e,Zc=$c&&$c.exports===Dc?yc.Buffer:void 0,Kc=(Zc?Zc.isBuffer:void 0)||function(){return!1},Hc={};Hc["[object Float32Array]"]=Hc["[object Float64Array]"]=Hc["[object Int8Array]"]=Hc["[object Int16Array]"]=Hc["[object Int32Array]"]=Hc["[object Uint8Array]"]=Hc["[object Uint8ClampedArray]"]=Hc["[object Uint16Array]"]=Hc["[object Uint32Array]"]=!0,Hc["[object Arguments]"]=Hc["[object Array]"]=Hc["[object ArrayBuffer]"]=Hc["[object Boolean]"]=Hc["[object DataView]"]=Hc["[object Date]"]=Hc["[object Error]"]=Hc["[object Function]"]=Hc["[object Map]"]=Hc["[object Number]"]=Hc["[object Object]"]=Hc["[object RegExp]"]=Hc["[object Set]"]=Hc["[object String]"]=Hc["[object WeakMap]"]=!1;var Vc,Fc="object"==typeof exports&&exports&&!exports.nodeType&&exports,qc=Fc&&e&&!e.nodeType&&e,Gc=qc&&qc.exports===Fc&&mc.process,Yc=function(){try{return qc&&qc.require&&qc.require("util").types||Gc&&Gc.binding&&Gc.binding("util")}catch{}}(),Jc=Yc&&Yc.isTypedArray,Xc=Jc?(Vc=Jc,function(e){return Vc(e)}):function(e){return Ic(e)&&Nc(e.length)&&!!Hc[Ac(e)]},Qc=Object.prototype.hasOwnProperty;var eh=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),th=Object.prototype.hasOwnProperty;function rh(e){return Lc(e)?function(e){var t=Sc(e),r=!t&&Wc(e),n=!t&&!r&&Kc(e),i=!t&&!r&&!n&&Xc(e),s=t||r||n||i,o=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],a=o.length;for(var u in e)Qc.call(e,u)&&(!s||!("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Pc(u,a)))&&o.push(u);return o}(e):function(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rc)}(e))return eh(e);var t=[];for(var r in Object(e))th.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}var nh=function(e,t){if(null==e)return e;if(!Lc(e))return function(e,t){return e&&function(e,t,r){for(var n=-1,i=Object(e),s=r(e),o=s.length;o--;){var a=s[++n];if(!1===t(i[a],a,i))break}return e}(e,t,rh)}(e,t);for(var r=e.length,n=-1,i=Object(e);++n<r&&!1!==t(i[n],n,i););return e};const ih="web3/dex-widget",sh="web3/dex-widget/bridge",oh={[fc.EVM]:"metamask",[fc.SOLANA]:"phantom",[fc.WALLET_CONNECT]:"walletconnect"},ah=e=>e?{inputChain:e.fromChain,outputChain:e.toChain,inputCurrency:e.fromToken,outputCurrency:e.toToken}:null,uh=e=>{const{baseUrl:t,feeConfig:r,tokenPair:n,bridgeTokenPair:i,providerType:s,tradeType:o,theme:a,lang:u,chainIds:c,extraParams:h}=e;vh({widgetVersion:"1",feeConfig:r,tokenPair:n,bridgeTokenPair:i,providerType:s});const{supportTradeType:l,route:d,defaultTokenPair:f,formattedTokenPair:p,formattedBridgeTokenPair:m}=function(e,t,r){const n=ah(t),i=ah(r);if(e===dc.SWAP)return{supportTradeType:[dc.SWAP],route:ih,defaultTokenPair:n,formattedTokenPair:n,formattedBridgeTokenPair:null};if(e===dc.BRIDGE)return{supportTradeType:[dc.BRIDGE],route:sh,defaultTokenPair:i,formattedTokenPair:null,formattedBridgeTokenPair:i};const s=!n&&i,o=s?sh:ih,a=s?i:n;return{supportTradeType:[dc.SWAP,dc.BRIDGE],route:o,defaultTokenPair:a,formattedTokenPair:n,formattedBridgeTokenPair:i}}(o,n,i),g={tradeType:l,theme:a,lang:u,walletType:oh[s],widgetVersion:"1",chainIds:c},y={...g,...f},b=new URLSearchParams;for(const e in y)if(y.hasOwnProperty(e)){const t=y[e];""!==t&&null!=t&&b.append(e,t)}return{url:`${"string"==typeof t?t:"https://www.okx.com"}/${d}?${b.toString()}`,data:{...g,tokenPair:p,bridgeTokenPair:m,feeConfig:r,providerType:s,extraParams:h}}},ch=(e,t)=>{let r=null;return t===fc.EVM&&null!=e&&e.chainId&&(r=parseInt(e.chainId,16)),t===fc.WALLET_CONNECT&&null!=e&&e.chainId&&(r=e.chainId),t===fc.SOLANA&&(r=501),r},hh=(e,t)=>{var r;return t!==fc.EVM&&t!==fc.WALLET_CONNECT||null==e||!e.chainId?t===fc.SOLANA?null==(r=null==e?void 0:e.publicKey)?void 0:r.toBase58():null:t===fc.EVM?e.selectedAddress:e.accounts[0]},lh=e=>/^[\x20-\x7E]*$/.test(e),dh=e=>{try{const t=decodeURIComponent(e);if(!lh(t))throw new Error(`Decoded value contains invalid characters: ${t}`);return t}catch(t){throw new Error(`Failed to decode URI component: ${e}. Error: ${t.message}`)}},fh=e=>{const t=new URL(e),r=new URLSearchParams(t.search),n={};for(const[e,t]of r.entries()){const r=dh(t);n[e]=r}return n},ph=e=>{if(mrDummy("params:",e),function(e){return"string"==typeof e||!Sc(e)&&Ic(e)&&"[object String]"==Ac(e)}(e)){if(!lh(e))throw new Error(`Invalid string found: ${e}`);return!0}return Bc(e)&&function(e,t){(Sc(e)?Mc:nh)(e,function(e){return"function"==typeof e?e:Tc}(t))}(e,((e,t)=>{if(!lh(t))throw new Error(`Invalid object key found: ${t}`);ph(e)})),!0},mh=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),gh=e=>!Number.isNaN(Number(e))&&null!=e&&""!==e&&!Array.isArray(e),yh=e=>gh(e)&&Number(e)>0&&Number(e)<=3,bh=e=>("string"==typeof e||"number"==typeof e)&&Number(e)>=0,wh=e=>bh(null==e?void 0:e.fromChain)&&bh(null==e?void 0:e.toChain),vh=({widgetVersion:e,feeConfig:t={},tokenPair:r,bridgeTokenPair:n,providerType:i})=>{const s=oh[i];if(!e)throw new Error("WIDGET_VERSION IS REQUIRED");if(i&&!s)throw new Error("Invalid providerType");if(r&&!wh(r))throw new Error("Invalid tokenPair");if(n&&!wh(n))throw new Error("Invalid bridgeTokenPair");const o=(e=>mh(e)?Object.values(e).some((e=>{const t=null==e?void 0:e.feePercent;return mh(null==e?void 0:e.referrerAddress)?!!mh(null==e?void 0:e.referrerAddress)&&!!Object.values(null==e?void 0:e.referrerAddress).some((e=>gh(e.feePercent)?!yh(null==e?void 0:e.feePercent):!yh(t))):!yh(t)}))?"FeePercent MUST be a number > 0 and <= 3":null:"FeeConfig MUST be an object")(t);if(o)throw new Error(o);return!0};class kh{constructor(e){rc(this,"iframeWindow"),this.iframeWindow=e}async processTransaction(e,t,r,n,i,s){var o,a;const u={method:e,id:Number(t),params:n};try{if((null==i?void 0:i.selectedAddress)||(null==(o=null==i?void 0:i.accounts)?void 0:o[0])||await i.request({method:"eth_requestAccounts",id:Date.now(),params:[]}),"eth_sendTransaction"===e){const o=function(e){const t={...e};return(e.gas||e.gasLimit)&&(t.gas=_n(e.gas??e.gasLimit)),(e.maxPriorityFeePerGas||e.maxFeePerGas)&&delete t.gasPrice,["gasPrice","gas","value","maxPriorityFeePerGas","maxFeePerGas","nonce","chainId"].filter((e=>!En(t[e]))).forEach((e=>{t[e]=((e,t)=>{"bigint"!=typeof e&&vn.validate(["int"],[e]);let r=Kr(e);return t&&(r.startsWith("-")||r.length%2!=1?r.length%2==0&&r.startsWith("-")&&(r="-0x0".concat(r.slice(3))):r="0x0".concat(r.slice(2))),r})(t[e])})),t}(n[0]),c={method:e,id:Number(t),params:[o]};mrDummy("eth_sendTransaction requestPara.params[0]",{requestPara:u,requestPayload:c});const h=await(null==(a=null==i?void 0:i.request)?void 0:a.call(i,c));mrDummy("provider.request===>",h),sc(this.iframeWindow,hc.PROVIDER_ON_EVENT,{id:t,mode:"iframe",data:h,path:r,type:s,error:null,success:!0})}else{const e=await i.request(u);mrDummy("sent evm transaction request:",e),sc(this.iframeWindow,hc.PROVIDER_ON_EVENT,{id:t,mode:"iframe",data:e,path:r,type:s,success:!0})}}catch(e){console.error("EVM Error:",e),sc(this.iframeWindow,hc.PROVIDER_ON_EVENT,{id:t,mode:"iframe",error:e&&JSON.stringify(e),path:r,type:s,success:!1})}}onProviderEvent(e,t){sc(this.iframeWindow,hc.PROVIDER_ONEVENT_WALLET_SATUS,{event:e,params:t})}registerProviderEventListeners(e){["connect","disconnect","close","chainChanged","accountsChanged"].forEach((t=>{e.on(t,(e=>{this.onProviderEvent(t,e)}))}))}}function _h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Eh=_h(function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var s=(e.length-r)*u+1>>>0,c=new Uint8Array(s);e[r];){var h=t[e.charCodeAt(r)];if(255===h)return;for(var l=0,d=s-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=o*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=s-i;f!==s&&0===c[f];)f++;for(var p=new Uint8Array(n+(s-f)),m=n;f!==s;)p[m++]=c[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var u=(s-i)*c+1>>>0,h=new Uint8Array(u);i!==s;){for(var l=t[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%o>>>0,l=l/o>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var m=a.repeat(r);p<u;++p)m+=e.charAt(h[p]);return m},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));class xh{constructor(e){rc(this,"iframeWindow"),this.iframeWindow=e}async processTransaction(e,t,r,n,i,s){var o,a,u,c,h;try{const l=Array.isArray(n)?n:[n],d=l[0],f=null==(o=l[0])?void 0:o.onlyIfTrusted,p=null==(a=l[0])?void 0:a.okxArgs,m=null==(u=l[0])?void 0:u.transaction,g=null==(c=l[0])?void 0:c.type;if(f)return void sc(this.iframeWindow,hc.PROVIDER_ON_EVENT,{id:t,mode:"iframe",data:{onlyIfTrusted:!0},path:r,type:s,success:!0});if("string"==typeof d)try{const e=Ra.from(Eh.decode(d));l[0]=e}catch{const e=Ua.deserialize(Eh.decode(d));mrDummy("new version deserializeTransaction:",e),l[0]=e}if(p&&g&&m){const e=Ua.deserialize(Eh.decode(m)),t=null==(h=l[0])?void 0:h.options;l[0]=e,l[1]=t,l[2]=p}const y=await i[e](...l);mrDummy("solana request:",y),sc(this.iframeWindow,hc.PROVIDER_ON_EVENT,{id:t,mode:"iframe",data:y,path:r,type:s,success:!0})}catch(e){console.error("Solana Error:",e),sc(this.iframeWindow,hc.PROVIDER_ON_EVENT,{id:t,mode:"iframe",error:JSON.stringify(e),path:r,type:s,success:!1})}}onProviderEvent(e,t){const r=null==t?void 0:t.toBase58();sc(this.iframeWindow,hc.PROVIDER_ONEVENT_WALLET_SOLANA_SATUS,{event:e,params:{address:r,chainId:501,walletType:oh.SOLANA}})}registerProviderEventListeners(e){["connect","disconnect","accountChanged"].forEach((t=>{e.on(t,(e=>{this.onProviderEvent(t,e)}))}))}async processConnectEvent(e,t){const{id:r,mode:n,params:i,path:s,type:o}=e||{params:null,mode:null,id:null,path:null,type:null};try{if(!t||"iframe"===n)throw new Error("No Provider");const{method:e}=i[0]||{method:null};if("solana"===o&&"connect"===e){const e=t;if(null==e||!e.connect)throw new Error("Not solana provider");e.connect().then((e=>{sc(this.iframeWindow,hc.PROVIDER_ON_EVENT_CONNECT,{id:r,mode:"iframe",data:e.publicKey.toBase58(),path:s,type:o,success:!0})})).catch((e=>{sc(this.iframeWindow,hc.PROVIDER_ON_EVENT_CONNECT,{id:r,mode:"iframe",error:JSON.stringify(e),path:s,type:o,success:!1})}))}}catch(e){sc(this.iframeWindow,hc.PROVIDER_ON_EVENT_CONNECT,{id:r,mode:"iframe",error:JSON.stringify(e),path:s,type:o,success:!1})}}}class Ah{constructor(e,t){switch(rc(this,"strategy"),e){case fc.SOLANA:this.strategy=new xh(t);break;case fc.EVM:this.strategy=new kh(t);break;default:throw new Error("Unsupported provider type")}}setStrategy(e){this.strategy=e}async processTransaction(e,t,r,n,i,s){mrDummy("processTransaction:",{method:e,id:t,path:r,requestArgs:n,provider:i,type:s}),await this.strategy.processTransaction(e,t,r,n,i,s)}registerProviderEventListeners(e){this.strategy.registerProviderEventListeners(e)}async processConnectEvent(e,t){this.strategy instanceof xh&&(mrDummy("processConnectEvent:",this.strategy,{provider:t}),await this.strategy.processConnectEvent(e,t))}}class Ih{constructor(e,t){rc(this,"provider",null),rc(this,"processor"),rc(this,"listener"),rc(this,"connectListener"),rc(this,"processProviderEventFromWindow",(async e=>{mrDummy("processProviderEventFromWindow:",e);const{type:t}=e,{method:r,params:n}=e.params[0];await this.processor.processTransaction(r,e.id,e.path,n,this.provider,t)})),rc(this,"processConnectEvent",(async e=>{await this.processor.processConnectEvent(e,this.provider)})),this.iframeWindow=e,this.processor=new Ah(t,this.iframeWindow)}disconnect(){this.provider=null,ac(window,lc.PROVIDER_ON_EVENT,this.listener),ac(window,lc.PROVIDER_ON_EVENT_CONNECT,this.connectListener)}onConnect(e){this.provider?this.disconnect():(mrDummy("onConnect====>"),this.listener=oc(window,lc.PROVIDER_ON_EVENT,this.processProviderEventFromWindow),this.connectListener=oc(window,lc.PROVIDER_ON_EVENT_CONNECT,this.processConnectEvent)),this.provider=e,this.processor.registerProviderEventListeners(e)}}const Sh="487.5px",Bh=450,Th=375;function Mh(e,t){!function(e,t){const r=Number(t),{defaultClassName:n,specifiedClassName:i}=Oh();r?(Nh(r<Th?Th:r),e.className=i):(Nh(Bh),e.className=n)}(e,t.width)}const Oh=function(){const e=Date.now().toString();return function(){return{id:e,defaultClassName:`default-widget-iframe-${e}`,specifiedClassName:`specified-widget-iframe-${e}`}}}();function Ph(e,{defaultClassName:t,specifiedClassName:r,width:n}){e.innerHTML="",e.innerHTML=`\n        .${t} {\n            width: ${Bh}px;\n            min-height: ${Sh};\n            border: none;\n        }\n        @media (max-width: 767px) {\n            .${t} {\n                width: 100%;\n            }\n        }\n        .${r} {\n            width: ${n}px;\n            min-height: ${Sh};\n            border: none;\n        }\n    `}function Nh(e){const{id:t,defaultClassName:r,specifiedClassName:n}=Oh(),i=document.getElementById(t);if(i)return Ph(i,{defaultClassName:r,specifiedClassName:n,width:e}),i;const s=document.createElement("style");return Ph(s,{defaultClassName:r,specifiedClassName:n,width:e}),s.id=t,document.head.appendChild(s),s}function Lh(e,t){mrDummy("createOkxSwapWidget====>",e,t);const{params:r,provider:n,listeners:i}=t;let s=n,{data:o,url:a}=uh(r);const u=function(e,t){const{width:r}=e,n=document.createElement("iframe");return fh(t),n.src=t,Mh(n,{width:r}),n.scrolling="no",n.style.border="none",n}(r,a);e.innerHTML="",e.appendChild(u);const{contentWindow:c}=u;if(!c)throw console.error("Iframe does not contain a window",u),new Error("Iframe does not contain a window!");const h=[];h.push(...function(e,t=Sh){return[oc(window,cc.UPDATE_HEIGHT,(r=>{e.style.height=r.height?`${r.height}px`:t})),oc(window,cc.SET_FULL_HEIGHT,(({isUpToSmall:r})=>{e.style.height=r?t:`${document.body.offsetHeight}px`}))]}(u,r.height),function(e,t){const r=oc(window,cc.LOAD_READY,(()=>{zh(e,t),uc(window,r)}));return r}(c,o));const l=new pc(window,i);let d=Rh(c,null,s,r.providerType);return u.addEventListener("load",(()=>{if(mrDummy("updateProvider====>load",s,r),zh(c,o),s&&o.providerType){const e=Uh(s,o.providerType);mrDummy("updateProvider load",e,s),Ch(c,e,s)}})),{updateParams:e=>{const{width:t,lang:n,theme:i,extraParams:s}=e;Mh(u,{width:t});const a={...r,lang:n,theme:i,extraParams:s};o=uh(a).data,ph(o),zh(c,o)},updateListeners:e=>l.updateListeners(e),updateProvider:async(e,t)=>{var r;ph(t),mrDummy("updateProvider =====>",e,t),null==d||d.disconnect(),null==(r=null==s?void 0:s.removeAllListeners)||r.call(s),s=e;const n=Uh(s,t);o={...o,...n},mrDummy("updateProvider ===> Params",{updateProviderParams:n,currentParams:o}),d=Rh(c,d,e,t),Ch(c,n,s)},destroy:()=>{null==d||d.disconnect(),l.stopListeningIframe(),h.forEach((e=>window.removeEventListener("message",e)));try{e.removeChild(u)}catch(e){console.error("Error removing iframe, maybe iframe is removed",e)}!function(){const{id:e}=Oh(),t=document.getElementById(e);t&&t.parentNode.removeChild(t)}()},iframeWindow:c}}function Rh(e,t,r,n){if(!r)return;if(!Object.values(fc).includes(n))throw new Error("providerType is required");mrDummy("updateProvider iframeRpcProviderBridge===>",t),t&&t.disconnect();const i=new Ih(e,n);return r&&i.onConnect(r),i}function Uh(e,t){return{providerType:t,walletType:oh[t],chainId:ch(e,t),address:hh(e,t)}}function Ch(e,t,r){const n=!!r;mrDummy("updateProviderEmitEvent",t,e),sc(e,hc.UPDATE_PROVIDER,{appParams:t,hasProvider:n})}function zh(e,t){sc(e,hc.UPDATE_PARAMS,{appParams:t})}},601:(e,t,r)=>{"use strict";t.I0=t.DH=t.NX=t.u8=t.cY=void 0,t.av=t.O6=t.w3=t.Wg=void 0;const n=r(287);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class o{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}class u extends o{isCount(){throw new Error("ExternalLayout is abstract")}}class c extends u{constructor(e,t=0,r){if(!(e instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof h||this.layout instanceof l}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class h extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntLE(e,r,this.span),this.span}}class l extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntBE(e,r,this.span),this.span}}const d=Math.pow(2,32);function f(e){const t=Math.floor(e/d);return{hi32:t,lo32:e-t*d}}function p(e,t){return e*d+t}class m extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t);return p(r.readUInt32LE(t+4),n)}encode(e,t,r=0){const n=f(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class g extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t);return p(r.readInt32LE(t+4),n)}encode(e,t,r=0){const n=f(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class y extends o{constructor(e,t,r){if(!(e instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof u&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof u)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof u&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;for(i instanceof u&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof u&&this.count.encode(e.length,t,r),i}}class b extends o{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof o),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(s=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class w extends o{constructor(e,t){if(!(e instanceof u&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof u||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),s(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof u&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=s(e);return s(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof u&&this.length.encode(n,t,r),n}}t.cY=(e,t,r)=>new c(e,t,r),t.u8=e=>new h(1,e),t.NX=e=>new h(2,e),t.DH=e=>new h(4,e),t.I0=e=>new m(e),t.Wg=e=>new g(e),t.w3=(e,t,r)=>new b(e,t,r),t.O6=(e,t,r)=>new y(e,t,r),t.av=(e,t)=>new w(e,t)},621:(e,t,r)=>{"use strict";var n=r(861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===u;)i++,r++;for(var o=(e.length-r)*c+1>>>0,h=new Uint8Array(o);r<e.length;){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,f=o-1;(0!==l||d<s)&&-1!==f;f--,d++)l+=a*h[f]>>>0,h[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");s=d,r++}for(var p=o-s;p!==o&&0===h[p];)p++;var m=n.allocUnsafe(i+(o-p));m.fill(0,0,i);for(var g=i;p!==o;)m[g++]=h[p++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var c=(o-s)*h+1>>>0,l=new Uint8Array(c);s!==o;){for(var d=t[s],f=0,p=c-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*l[p]>>>0,l[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,s++}for(var m=c-i;m!==c&&0===l[m];)m++;for(var g=u.repeat(r);m<c;++m)g+=e.charAt(l[m]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},466:(e,t,r)=>{var n=r(621);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],u=s[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,u)),h=0,l=u>0?o-4:o;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;return 2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[h++]=255&t),1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(u(e,a,a+o>c?c:a+o));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},184:(e,t)=>{"use strict";t.k5=function(e){{const t=Buffer.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},t.Bq=function(e,t){{const r=e.toString(16),n=Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}}},404:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(790).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function c(e,t,r,i){for(var s=0,o=0,a=Math.min(e.length,r),u=t;u<a;u++){var c=e.charCodeAt(u)-48;s*=i,o=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&o<i,"Invalid character"),s+=o}return s}function h(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,u=0,h=r;h<a;h+=n)u=c(e,h,h+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var l=1;for(u=c(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){h(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(e){s.prototype.inspect=l}else s.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,u=o/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;h+=(o=(i=0|e.words[p])*(s=0|t.words[f])+l)/67108864|0,l=67108863&o}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],u=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-u.length]+u+r:u+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],h=p[e];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var m=l.modrn(h).toString(e);r=(l=l.idivn(h)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,r){var n,i,s,o=e.words,a=t.words,u=r.words,c=0,h=0|o[0],l=8191&h,d=h>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,k=w>>>13,_=0|o[4],E=8191&_,x=_>>>13,A=0|o[5],I=8191&A,S=A>>>13,B=0|o[6],T=8191&B,M=B>>>13,O=0|o[7],P=8191&O,N=O>>>13,L=0|o[8],R=8191&L,U=L>>>13,C=0|o[9],z=8191&C,j=C>>>13,W=0|a[0],D=8191&W,$=W>>>13,Z=0|a[1],K=8191&Z,H=Z>>>13,V=0|a[2],F=8191&V,q=V>>>13,G=0|a[3],Y=8191&G,J=G>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,he=0|a[8],le=8191&he,de=he>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(l,D))|0)+((8191&(i=(i=Math.imul(l,$))+Math.imul(d,D)|0))<<13)|0;c=((s=Math.imul(d,$))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,D),i=(i=Math.imul(p,$))+Math.imul(m,D)|0,s=Math.imul(m,$);var ye=(c+(n=n+Math.imul(l,K)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(d,K)|0))<<13)|0;c=((s=s+Math.imul(d,H)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,D),i=(i=Math.imul(y,$))+Math.imul(b,D)|0,s=Math.imul(b,$),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,H)|0;var be=(c+(n=n+Math.imul(l,F)|0)|0)+((8191&(i=(i=i+Math.imul(l,q)|0)+Math.imul(d,F)|0))<<13)|0;c=((s=s+Math.imul(d,q)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(v,D),i=(i=Math.imul(v,$))+Math.imul(k,D)|0,s=Math.imul(k,$),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,H)|0,n=n+Math.imul(p,F)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(m,F)|0,s=s+Math.imul(m,q)|0;var we=(c+(n=n+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(d,Y)|0))<<13)|0;c=((s=s+Math.imul(d,J)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(E,D),i=(i=Math.imul(E,$))+Math.imul(x,D)|0,s=Math.imul(x,$),n=n+Math.imul(v,K)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(k,K)|0,s=s+Math.imul(k,H)|0,n=n+Math.imul(y,F)|0,i=(i=i+Math.imul(y,q)|0)+Math.imul(b,F)|0,s=s+Math.imul(b,q)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,Y)|0,s=s+Math.imul(m,J)|0;var ve=(c+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(d,Q)|0))<<13)|0;c=((s=s+Math.imul(d,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(I,D),i=(i=Math.imul(I,$))+Math.imul(S,D)|0,s=Math.imul(S,$),n=n+Math.imul(E,K)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(x,K)|0,s=s+Math.imul(x,H)|0,n=n+Math.imul(v,F)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(k,F)|0,s=s+Math.imul(k,q)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(b,Y)|0,s=s+Math.imul(b,J)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,ee)|0;var ke=(c+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(d,re)|0))<<13)|0;c=((s=s+Math.imul(d,ne)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(T,D),i=(i=Math.imul(T,$))+Math.imul(M,D)|0,s=Math.imul(M,$),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,H)|0,n=n+Math.imul(E,F)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(x,F)|0,s=s+Math.imul(x,q)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(k,Y)|0,s=s+Math.imul(k,J)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,s=s+Math.imul(m,ne)|0;var _e=(c+(n=n+Math.imul(l,se)|0)|0)+((8191&(i=(i=i+Math.imul(l,oe)|0)+Math.imul(d,se)|0))<<13)|0;c=((s=s+Math.imul(d,oe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,D),i=(i=Math.imul(P,$))+Math.imul(N,D)|0,s=Math.imul(N,$),n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,H)|0,n=n+Math.imul(I,F)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(S,F)|0,s=s+Math.imul(S,q)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(x,Y)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(b,re)|0,s=s+Math.imul(b,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0;var Ee=(c+(n=n+Math.imul(l,ue)|0)|0)+((8191&(i=(i=i+Math.imul(l,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((s=s+Math.imul(d,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(R,D),i=(i=Math.imul(R,$))+Math.imul(U,D)|0,s=Math.imul(U,$),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,K)|0,s=s+Math.imul(N,H)|0,n=n+Math.imul(T,F)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(M,F)|0,s=s+Math.imul(M,q)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(S,Y)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(x,Q)|0,s=s+Math.imul(x,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(k,re)|0,s=s+Math.imul(k,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(b,se)|0,s=s+Math.imul(b,oe)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,s=s+Math.imul(m,ce)|0;var xe=(c+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;c=((s=s+Math.imul(d,de)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(z,D),i=(i=Math.imul(z,$))+Math.imul(j,D)|0,s=Math.imul(j,$),n=n+Math.imul(R,K)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(U,K)|0,s=s+Math.imul(U,H)|0,n=n+Math.imul(P,F)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(N,F)|0,s=s+Math.imul(N,q)|0,n=n+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(M,Y)|0,s=s+Math.imul(M,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(x,re)|0,s=s+Math.imul(x,ne)|0,n=n+Math.imul(v,se)|0,i=(i=i+Math.imul(v,oe)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,n=n+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(b,ue)|0,s=s+Math.imul(b,ce)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,le)|0,s=s+Math.imul(m,de)|0;var Ae=(c+(n=n+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((s=s+Math.imul(d,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(z,K),i=(i=Math.imul(z,H))+Math.imul(j,K)|0,s=Math.imul(j,H),n=n+Math.imul(R,F)|0,i=(i=i+Math.imul(R,q)|0)+Math.imul(U,F)|0,s=s+Math.imul(U,q)|0,n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,Y)|0,s=s+Math.imul(N,J)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(S,re)|0,s=s+Math.imul(S,ne)|0,n=n+Math.imul(E,se)|0,i=(i=i+Math.imul(E,oe)|0)+Math.imul(x,se)|0,s=s+Math.imul(x,oe)|0,n=n+Math.imul(v,ue)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(k,ue)|0,s=s+Math.imul(k,ce)|0,n=n+Math.imul(y,le)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(b,le)|0,s=s+Math.imul(b,de)|0;var Ie=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((s=s+Math.imul(m,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,q))+Math.imul(j,F)|0,s=Math.imul(j,q),n=n+Math.imul(R,Y)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(U,Y)|0,s=s+Math.imul(U,J)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(N,Q)|0,s=s+Math.imul(N,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(M,re)|0,s=s+Math.imul(M,ne)|0,n=n+Math.imul(I,se)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,n=n+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(x,ue)|0,s=s+Math.imul(x,ce)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(k,le)|0,s=s+Math.imul(k,de)|0;var Se=(c+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((s=s+Math.imul(b,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(z,Y),i=(i=Math.imul(z,J))+Math.imul(j,Y)|0,s=Math.imul(j,J),n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(U,Q)|0,s=s+Math.imul(U,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(N,re)|0,s=s+Math.imul(N,ne)|0,n=n+Math.imul(T,se)|0,i=(i=i+Math.imul(T,oe)|0)+Math.imul(M,se)|0,s=s+Math.imul(M,oe)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(S,ue)|0,s=s+Math.imul(S,ce)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,de)|0)+Math.imul(x,le)|0,s=s+Math.imul(x,de)|0;var Be=(c+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((s=s+Math.imul(k,me)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(z,Q),i=(i=Math.imul(z,ee))+Math.imul(j,Q)|0,s=Math.imul(j,ee),n=n+Math.imul(R,re)|0,i=(i=i+Math.imul(R,ne)|0)+Math.imul(U,re)|0,s=s+Math.imul(U,ne)|0,n=n+Math.imul(P,se)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(N,se)|0,s=s+Math.imul(N,oe)|0,n=n+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(M,ue)|0,s=s+Math.imul(M,ce)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(S,le)|0,s=s+Math.imul(S,de)|0;var Te=(c+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((s=s+Math.imul(x,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(z,re),i=(i=Math.imul(z,ne))+Math.imul(j,re)|0,s=Math.imul(j,ne),n=n+Math.imul(R,se)|0,i=(i=i+Math.imul(R,oe)|0)+Math.imul(U,se)|0,s=s+Math.imul(U,oe)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(N,ue)|0,s=s+Math.imul(N,ce)|0,n=n+Math.imul(T,le)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(M,le)|0,s=s+Math.imul(M,de)|0;var Me=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(S,pe)|0))<<13)|0;c=((s=s+Math.imul(S,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(z,se),i=(i=Math.imul(z,oe))+Math.imul(j,se)|0,s=Math.imul(j,oe),n=n+Math.imul(R,ue)|0,i=(i=i+Math.imul(R,ce)|0)+Math.imul(U,ue)|0,s=s+Math.imul(U,ce)|0,n=n+Math.imul(P,le)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(N,le)|0,s=s+Math.imul(N,de)|0;var Oe=(c+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((s=s+Math.imul(M,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(z,ue),i=(i=Math.imul(z,ce))+Math.imul(j,ue)|0,s=Math.imul(j,ce),n=n+Math.imul(R,le)|0,i=(i=i+Math.imul(R,de)|0)+Math.imul(U,le)|0,s=s+Math.imul(U,de)|0;var Pe=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(N,pe)|0))<<13)|0;c=((s=s+Math.imul(N,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(z,le),i=(i=Math.imul(z,de))+Math.imul(j,le)|0,s=Math.imul(j,de);var Ne=(c+(n=n+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,me)|0)+Math.imul(U,pe)|0))<<13)|0;c=((s=s+Math.imul(U,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Le=(c+(n=Math.imul(z,pe))|0)+((8191&(i=(i=Math.imul(z,me))+Math.imul(j,pe)|0))<<13)|0;return c=((s=Math.imul(j,me))+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=ke,u[6]=_e,u[7]=Ee,u[8]=xe,u[9]=Ae,u[10]=Ie,u[11]=Se,u[12]=Be,u[13]=Te,u[14]=Me,u[15]=Oe,u[16]=Pe,u[17]=Ne,u[18]=Le,0!==c&&(u[19]=c,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,u=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=u;c++){var h=s-c,l=(0|e.words[h])*(0|t.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(o=(o=o+(l/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function b(e,t,r){return y(e,t,r)}function w(e,t){this.x=e,this.y=t}Math.imul||(g=m),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):r<63?m(this,e,t):r<1024?y(this,e,t):b(this,e,t)},w.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},w.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},w.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},w.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,d=c,f=0;f<o;f++){var p=r[h+f],m=n[h+f],g=r[h+f+o],y=n[h+f+o],b=l*g-d*y;y=l*y+d*g,g=b,r[h+f]=p+g,n[h+f]=m+y,r[h+f+o]=p-g,n[h+f+o]=m-y,f!==a&&(b=u*l-c*d,d=u*d+c*l,l=b)}},w.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},w.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},w.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},w.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(!(-8192&s))},w.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},w.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,s,a,u,n,i),this.transform(c,s,h,l,n,i);for(var f=0;f<n;f++){var p=a[f]*h[f]-u[f]*l[f];u[f]=a[f]*l[f]+u[f]*h[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),b(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,u=(0|this.words[t])-a<<r;this.words[t]=u|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,u=r;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-s|l>>>s,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var u=(0|e.words[i])*t;a=((s-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,u=n.length-i.length;if("mod"!==t){(a=new s(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),u=new s(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var h=r.clone(),l=t.clone();!t.isZero();){for(var d=0,f=1;!(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;!(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(u)):(r.isub(t),a.isub(i),u.isub(o))}return{a,b:u,gcd:r.iushln(c)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,h=1;!(t.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var l=0,d=1;!(r.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new I(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function k(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},k.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},k.prototype.split=function(e,t){e.iushrn(this.n,0,t)},k.prototype.imulK=function(e){return e.imul(this.k)},i(_,k),_.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,k),i(x,k),i(A,k),A.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new E;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new A}return v[e]=t,t},I.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(h(e,e.umod(this.m)._forceRed(this)),e)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(l,new s(1).iushln(p-g-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=g}return d},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],h=u-1;h>=0;h--){var l=c>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4==++a||0===n&&0===h)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}u=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new S(e)},i(S,I),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},755:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;const u=a(r(404)),c=a(r(989)),h=o(r(281)),l=new("function"!=typeof TextDecoder?h.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),c.default.encode(Buffer.from(e))},t.baseDecode=function(e){return Buffer.from(c.default.decode(e))};const d=1024;class f extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=f;class p{constructor(){this.buf=Buffer.alloc(d),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(d)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new u.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new u.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new u.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new u.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(d)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function m(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new f("Reached the end of buffer when deserializing")}throw e}}}t.BinaryWriter=p;class g{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new u.default(e,"le")}readU128(){const e=this.readBuffer(16);return new u.default(e,"le")}readU256(){const e=this.readBuffer(32);return new u.default(e,"le")}readU512(){const e=this.readBuffer(64);return new u.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new f(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return l.decode(t)}catch(e){throw new f(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t,r,n,i){try{if("string"==typeof n)i[`write${y(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new f(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new f(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)b(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{b(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),b(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,s)=>{b(e,t,s,n.key,i),b(e,t,r,n.value,i)}));break;default:throw new f(`FieldType ${n} unrecognized`)}else w(e,r,i)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function w(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new f(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{b(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new f(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),b(e,o,t[o],a,r);break}}}}}function v(e,t,r,n){try{if("string"==typeof r)return n[`read${y(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(v(e,null,r[0],n));return t}return n.readArray((()=>v(e,t,r[0],n)))}if("option"===r.kind)return n.readU8()?v(e,t,r.type,n):void 0;if("map"===r.kind){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const s=v(e,t,r.key,n),o=v(e,t,r.value,n);i.set(s,o)}return i}return k(e,r,n)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function k(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new f(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,s]of e.get(t).fields)n[i]=v(e,i,s,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new f(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=v(e,s,o,r);return new t({[s]:a})}throw new f(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}s([m],g.prototype,"readU8",null),s([m],g.prototype,"readU16",null),s([m],g.prototype,"readU32",null),s([m],g.prototype,"readU64",null),s([m],g.prototype,"readU128",null),s([m],g.prototype,"readU256",null),s([m],g.prototype,"readU512",null),s([m],g.prototype,"readString",null),s([m],g.prototype,"readFixedArray",null),s([m],g.prototype,"readArray",null),t.BinaryReader=g,t.serialize=function(e,t,r=p){const n=new r;return w(e,t,n),n.toArray()},t.deserialize=function(e,t,r,n=g){const i=new n(r),s=k(e,t,i);if(i.offset<r.length)throw new f(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s},t.deserializeUnchecked=function(e,t,r,n=g){return k(e,t,new n(r))}},462:(e,t,r)=>{"use strict";var n=r(861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===u;)i++,r++;for(var o=(e.length-r)*c+1>>>0,h=new Uint8Array(o);r<e.length;){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,f=o-1;(0!==l||d<s)&&-1!==f;f--,d++)l+=a*h[f]>>>0,h[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");s=d,r++}for(var p=o-s;p!==o&&0===h[p];)p++;var m=n.allocUnsafe(i+(o-p));m.fill(0,0,i);for(var g=i;p!==o;)m[g++]=h[p++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var c=(o-s)*h+1>>>0,l=new Uint8Array(c);s!==o;){for(var d=t[s],f=0,p=c-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*l[p]>>>0,l[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,s++}for(var m=c-i;m!==c&&0===l[m];)m++;for(var g=u.repeat(r);m<c;++m)g+=e.charAt(l[m]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},989:(e,t,r)=>{var n=r(462);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},287:(e,t,r)=>{"use strict";const n=r(526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(G(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(G(e,ArrayBuffer)||e&&G(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(G(e,SharedArrayBuffer)||e&&G(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return h(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||G(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){let s,o=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===u)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){let r=!0;for(let n=0;n<u;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Y(n))return o;e[r+o]=n}return o}function k(e,t,r,n){return q(V(t,e.length-r),e,r,n)}function _(e,t,r,n){return q(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return q(F(t),e,r,n)}function x(e,t,r,n){return q(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,u;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(s=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=S));return r}(n)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return l(e)},u.allocUnsafeSlow=function(e){return l(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(G(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),G(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(G(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(G(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),c=this.slice(n,i),h=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==h[e]){s=c[e],o=h[e];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function O(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,i){$(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function R(e,t,r,n,i){$(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function z(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){Z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){Z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){Z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){Z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||N(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||N(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return C(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return C(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const j={};function W(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function D(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function $(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){Z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||K(t,e.length-(r+1))}(n,i,s)}function Z(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function K(e,t,r){if(Math.floor(e)!==e)throw Z(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=D(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=D(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function F(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function G(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,s),!0;case 6:return h.fn.call(h.context,t,n,i,s,o),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var d,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(e,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,t);break;case 3:h[c].fn.call(h[c].context,t,n);break;case 4:h[c].fn.call(h[c].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];h[c].fn.apply(h[c].context,u)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var u=0,c=[],h=a.length;u<h;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},251:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,d=r?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=c}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,u,c=8*s-i-1,h=(1<<c)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*u-1)*Math.pow(2,i),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+f]=255&o,f+=p,o/=256,c-=8);e[r+f-p]|=128*m}},22:(e,t,r)=>{"use strict";const n=r(341).v4,i=r(289),s=function(e,t){if(!(this instanceof s))return new s(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return n()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=s,s.prototype.request=function(e,t,r,n){const s=this;let o=null;const a=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&e&&"object"==typeof e&&"function"==typeof t)n=t,o=e;else{"function"==typeof r&&(n=r,r=void 0);const s="function"==typeof n;try{o=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s)return n(e);throw e}if(!s)return o}let u;try{u=JSON.stringify(o,this.options.replacer)}catch(e){return n(e)}return this.callServer(u,(function(e,t){s._parseResponse(e,t,n)})),o},s.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)}},289:(e,t,r)=>{"use strict";const n=r(341).v4;e.exports=function(e,t,r,i){if("string"!=typeof e)throw new TypeError(e+" must be a string");const s="number"==typeof(i=i||{}).version?i.version:2;if(1!==s&&2!==s)throw new TypeError(s+" must be 1 or 2");const o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(void 0===r){const e="function"==typeof i.generator?i.generator:function(){return n()};o.id=e(o,i)}else 2===s&&null===r?i.notificationIdNull&&(o.id=null):o.id=r;return o}},861:(e,t,r)=>{var n=r(287),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},281:(e,t)=>{"use strict";function r(e,t,r){return t<=e&&e<=r}function n(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){this.tokens=[].slice.call(e)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var s=-1;function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}var a="utf-8";function u(e,t){if(!(this instanceof u))return new u(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(e){var t=e.fatal,n=0,i=0,a=0,u=128,c=191;this.handler=function(e,h){if(-1===h&&0!==a)return a=0,o(t);if(-1===h)return s;if(0===a){if(r(h,0,127))return h;if(r(h,194,223))a=1,n=h-192;else if(r(h,224,239))224===h&&(u=160),237===h&&(c=159),a=2,n=h-224;else{if(!r(h,240,244))return o(t);240===h&&(u=144),244===h&&(c=143),a=3,n=h-240}return n<<=6*a,null}if(!r(h,u,c))return n=a=i=0,u=128,c=191,e.prepend(h),o(t);if(u=128,c=191,n+=h-128<<6*(a-(i+=1)),i!==a)return null;var l=n;return n=a=i=0,l}}function l(e){e.fatal,this.handler=function(e,t){if(-1===t)return s;if(r(t,0,127))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var o=[(t>>6*n)+i];n>0;){var a=t>>6*(n-1);o.push(128|63&a),n-=1}return o}}u.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=n(t),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var o,a=new i(r),u=[];!a.endOfStream()&&(o=this._decoder.handler(a,a.read()))!==s;)null!==o&&(Array.isArray(o)?u.push.apply(u,o):u.push(o));if(!this._streaming){do{if((o=this._decoder.handler(a,a.read()))===s)break;null!==o&&(Array.isArray(o)?u.push.apply(u,o):u.push(o))}while(!a.endOfStream());this._decoder=null}return u.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===u[0]?(this._BOMseen=!0,u.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(u)}},c.prototype={encode:function(e,t){e=e?String(e):"",t=n(t),this._streaming||(this._encoder=new l(this._options)),this._streaming=Boolean(t.stream);for(var r,o=[],a=new i(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,u=1023&o;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(e));!a.endOfStream()&&(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);if(!this._streaming){for(;(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);this._encoder=null}return new Uint8Array(o)}},t.TextEncoder=c,t.TextDecoder=u},341:(e,t,r)=>{"use strict";var n;r.d(t,{v4:()=>h});var i=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=[],u=0;u<256;++u)a.push((u+256).toString(16).substr(1));const c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&o.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r},h=function(e,t,r){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return c(n)}},790:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=r(602);window.createOkxSwapWidget=e.c})(),{}})()));